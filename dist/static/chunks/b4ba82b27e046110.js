(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,78363,t=>{"use strict";var e=t.i(43476),i=t.i(932),a=t.i(71645),r=t.i(18566);t.s(["default",0,t=>{let s,n,o,l=(0,i.c)(5),{children:h}=t,c=(0,r.usePathname)();return l[0]!==c?(s=()=>{if("undefined"!=typeof document){var t;let e=(t=c)&&!(t.length<2)?t.charAt(1).toUpperCase()+t.slice(2):t;document.title="".concat(e," | Book on Transapp")}},n=[c],l[0]=c,l[1]=s,l[2]=n):(s=l[1],n=l[2]),(0,a.useEffect)(s,n),l[3]!==h?(o=(0,e.jsx)(a.default.Fragment,{children:h}),l[3]=h,l[4]=o):o=l[4],o}])},53528,(t,e,i)=>{"use strict";var a=(()=>{var t=Object.defineProperty,e=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,s=Object.prototype.propertyIsEnumerable,n=(e,i,a)=>i in e?t(e,i,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[i]=a,o=(t,e)=>{for(var i in e||(e={}))r.call(e,i)&&n(t,i,e[i]);if(a)for(var i of a(e))s.call(e,i)&&n(t,i,e[i]);return t},l=(t,e,i)=>n(t,"symbol"!=typeof e?e+"":e,i),h={},c={DEFAULT_OPTIONS:()=>_,DEFAULT_UUID_LENGTH:()=>u,default:()=>g};for(var d in c)t(h,d,{get:c[d],enumerable:!0});var u=6,_={dictionary:"alphanum",shuffle:!0,debug:!1,length:6,counter:0},p=class{constructor(t={}){var e=this;l(this,"counter"),l(this,"debug"),l(this,"dict"),l(this,"version"),l(this,"dictIndex",0),l(this,"dictRange",[]),l(this,"lowerBound",0),l(this,"upperBound",0),l(this,"dictLength",0),l(this,"uuidLength"),l(this,"_digit_first_ascii",48),l(this,"_digit_last_ascii",58),l(this,"_alpha_lower_first_ascii",97),l(this,"_alpha_lower_last_ascii",123),l(this,"_hex_last_ascii",103),l(this,"_alpha_upper_first_ascii",65),l(this,"_alpha_upper_last_ascii",91),l(this,"_number_dict_ranges",{digits:[this._digit_first_ascii,this._digit_last_ascii]}),l(this,"_alpha_dict_ranges",{lowerCase:[this._alpha_lower_first_ascii,this._alpha_lower_last_ascii],upperCase:[this._alpha_upper_first_ascii,this._alpha_upper_last_ascii]}),l(this,"_alpha_lower_dict_ranges",{lowerCase:[this._alpha_lower_first_ascii,this._alpha_lower_last_ascii]}),l(this,"_alpha_upper_dict_ranges",{upperCase:[this._alpha_upper_first_ascii,this._alpha_upper_last_ascii]}),l(this,"_alphanum_dict_ranges",{digits:[this._digit_first_ascii,this._digit_last_ascii],lowerCase:[this._alpha_lower_first_ascii,this._alpha_lower_last_ascii],upperCase:[this._alpha_upper_first_ascii,this._alpha_upper_last_ascii]}),l(this,"_alphanum_lower_dict_ranges",{digits:[this._digit_first_ascii,this._digit_last_ascii],lowerCase:[this._alpha_lower_first_ascii,this._alpha_lower_last_ascii]}),l(this,"_alphanum_upper_dict_ranges",{digits:[this._digit_first_ascii,this._digit_last_ascii],upperCase:[this._alpha_upper_first_ascii,this._alpha_upper_last_ascii]}),l(this,"_hex_dict_ranges",{decDigits:[this._digit_first_ascii,this._digit_last_ascii],alphaDigits:[this._alpha_lower_first_ascii,this._hex_last_ascii]}),l(this,"_dict_ranges",{_number_dict_ranges:this._number_dict_ranges,_alpha_dict_ranges:this._alpha_dict_ranges,_alpha_lower_dict_ranges:this._alpha_lower_dict_ranges,_alpha_upper_dict_ranges:this._alpha_upper_dict_ranges,_alphanum_dict_ranges:this._alphanum_dict_ranges,_alphanum_lower_dict_ranges:this._alphanum_lower_dict_ranges,_alphanum_upper_dict_ranges:this._alphanum_upper_dict_ranges,_hex_dict_ranges:this._hex_dict_ranges}),l(this,"log",function(){for(var t=arguments.length,i=Array(t),a=0;a<t;a++)i[a]=arguments[a];let r=[...i];if(r[0]="[short-unique-id] ".concat(i[0]),!0===e.debug&&"undefined"!=typeof console&&null!==console)return void console.log(...r)}),l(this,"_normalizeDictionary",(t,e)=>{let i;if(t&&Array.isArray(t)&&t.length>1)i=t;else{i=[],this.dictIndex=0;let e="_".concat(t,"_dict_ranges"),a=this._dict_ranges[e],r=0;for(let[,t]of Object.entries(a)){let[e,i]=t;r+=Math.abs(i-e)}i=Array(r);let s=0;for(let[,t]of Object.entries(a)){this.dictRange=t,this.lowerBound=this.dictRange[0],this.upperBound=this.dictRange[1];let e=this.lowerBound<=this.upperBound,a=this.lowerBound,r=this.upperBound;if(e)for(let t=a;t<r;t++)i[s++]=String.fromCharCode(t),this.dictIndex=t;else for(let t=a;t>r;t--)i[s++]=String.fromCharCode(t),this.dictIndex=t}i.length=s}if(e){let t=i.length;for(let e=t-1;e>0;e--){let t=Math.floor(Math.random()*(e+1));[i[e],i[t]]=[i[t],i[e]]}}return i}),l(this,"setDictionary",(t,e)=>{this.dict=this._normalizeDictionary(t,e),this.dictLength=this.dict.length,this.setCounter(0)}),l(this,"seq",()=>this.sequentialUUID()),l(this,"sequentialUUID",()=>{let t=this.dictLength,e=this.dict,i=this.counter,a=[];do{let r=i%t;i=Math.trunc(i/t),a.push(e[r])}while(0!==i)let r=a.join("");return this.counter+=1,r}),l(this,"rnd",function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.uuidLength||u;return e.randomUUID(t)}),l(this,"randomUUID",function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.uuidLength||u;if(null==t||t<1)throw Error("Invalid UUID Length Provided");let i=Array(t),a=e.dictLength,r=e.dict;for(let e=0;e<t;e++){let t=Math.floor(Math.random()*a);i[e]=r[t]}return i.join("")}),l(this,"fmt",(t,e)=>this.formattedUUID(t,e)),l(this,"formattedUUID",(t,e)=>{let i={$r:this.randomUUID,$s:this.sequentialUUID,$t:this.stamp};return t.replace(/\$[rs]\d{0,}|\$t0|\$t[1-9]\d{1,}/g,t=>{let a=t.slice(0,2),r=Number.parseInt(t.slice(2),10);return"$s"===a?i[a]().padStart(r,"0"):"$t"===a&&e?i[a](r,e):i[a](r)})}),l(this,"availableUUIDs",function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.uuidLength;return Number.parseFloat(([...new Set(e.dict)].length**t).toFixed(0))}),l(this,"_collisionCache",new Map),l(this,"approxMaxBeforeCollision",function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.availableUUIDs(e.uuidLength),i=e._collisionCache.get(t);if(void 0!==i)return i;let a=Number.parseFloat(Math.sqrt(Math.PI/2*t).toFixed(20));return e._collisionCache.set(t,a),a}),l(this,"collisionProbability",function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.availableUUIDs(e.uuidLength),i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.uuidLength;return Number.parseFloat((e.approxMaxBeforeCollision(t)/e.availableUUIDs(i)).toFixed(20))}),l(this,"uniqueness",function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.availableUUIDs(e.uuidLength),i=Number.parseFloat((1-e.approxMaxBeforeCollision(t)/t).toFixed(20));return i>1?1:i<0?0:i}),l(this,"getVersion",()=>this.version),l(this,"stamp",(t,e)=>{let i=Math.floor((e||new Date)/1e3).toString(16);if("number"==typeof t&&0===t)return i;if("number"!=typeof t||t<10)throw Error("Param finalLength must be a number greater than or equal to 10,\nor 0 if you want the raw hexadecimal timestamp");let a=t-9,r=Math.round(Math.random()*(a>15?15:a)),s=this.randomUUID(a);return"".concat(s.substring(0,r)).concat(i).concat(s.substring(r)).concat(r.toString(16))}),l(this,"parseStamp",(t,e)=>{if(e&&!/t0|t[1-9]\d{1,}/.test(e))throw Error("Cannot extract date from a formated UUID with no timestamp in the format");let i=e?e.replace(/\$[rs]\d{0,}|\$t0|\$t[1-9]\d{1,}/g,t=>({$r:t=>[...Array(t)].map(()=>"r").join(""),$s:t=>[...Array(t)].map(()=>"s").join(""),$t:t=>[...Array(t)].map(()=>"t").join("")})[t.slice(0,2)](Number.parseInt(t.slice(2),10))).replace(/^(.*?)(t{8,})(.*)$/g,(e,i,a)=>t.substring(i.length,i.length+a.length)):t;if(8===i.length)return new Date(1e3*Number.parseInt(i,16));if(i.length<10)throw Error("Stamp length invalid");let a=Number.parseInt(i.substring(i.length-1),16);return new Date(1e3*Number.parseInt(i.substring(a,a+8),16))}),l(this,"setCounter",t=>{this.counter=t}),l(this,"validate",(t,e)=>{let i=e?this._normalizeDictionary(e):this.dict;return t.split("").every(t=>i.includes(t))});const i=o(o({},_),t);this.counter=0,this.debug=!1,this.dict=[],this.version="5.3.2";const{dictionary:a,shuffle:r,length:s,counter:n}=i;this.uuidLength=s,this.setDictionary(a,r),this.setCounter(n),this.debug=i.debug,this.log(this.dict),this.log("Generator instantiated with Dictionary Size ".concat(this.dictLength," and counter set to ").concat(this.counter)),this.log=this.log.bind(this),this.setDictionary=this.setDictionary.bind(this),this.setCounter=this.setCounter.bind(this),this.seq=this.seq.bind(this),this.sequentialUUID=this.sequentialUUID.bind(this),this.rnd=this.rnd.bind(this),this.randomUUID=this.randomUUID.bind(this),this.fmt=this.fmt.bind(this),this.formattedUUID=this.formattedUUID.bind(this),this.availableUUIDs=this.availableUUIDs.bind(this),this.approxMaxBeforeCollision=this.approxMaxBeforeCollision.bind(this),this.collisionProbability=this.collisionProbability.bind(this),this.uniqueness=this.uniqueness.bind(this),this.getVersion=this.getVersion.bind(this),this.stamp=this.stamp.bind(this),this.parseStamp=this.parseStamp.bind(this)}};l(p,"default",p);var g=p;return((a,s,n,o)=>{if(s&&"object"==typeof s||"function"==typeof s)for(let l of i(s))r.call(a,l)||l===n||t(a,l,{get:()=>s[l],enumerable:!(o=e(s,l))||o.enumerable});return a})(t({},"__esModule",{value:!0}),h)})();e.exports=a.default,"undefined"!=typeof window&&(a=a.default)},77750,t=>{"use strict";var e=t.i(43476),i=t.i(932),a=t.i(78363),r=t.i(47167),s=t.i(67034),n=t.i(71645),o=t.i(29685),l=t.i(1381),h=t.i(34423),c=t.i(78158),d=t.i(92094),u=t.i(18102),_=t.i(27179),p=t.i(4794),g=t.i(30671),m=t.i(52353),f=t.i(66540),b=t.i(81949),y=t.i(53528),v=t.i(9327);t.i(85269);var x=t.i(22831),w=t.i(18566),j=t.i(5766);let U=new Date().getFullYear(),I=()=>{var t;let{t:i}=(0,x.useTranslation)(),a=(0,w.useRouter)(),I=localStorage.getItem("transactionID"),[D,S]=(0,n.useState)(!1),[C,N]=(0,n.useState)(!1),[M,k]=(0,n.useState)(""),[B,A]=(0,n.useState)(null),{state:L}=(0,o.useStateMachine)({updateSearch:l.updateSearch,updateAction:l.updateAction}),[F,O]=(0,n.useState)(!0),P="".concat("4d70631d-397c-4efd-929a-87fcd3a9d162",":").concat("2a8f415d-d9d2-4834-a573-b12c1375b94c"),E=void 0!==s.Buffer?s.Buffer.from(P).toString("base64"):btoa(P),[q,$]=(0,n.useState)({modal_static:!1}),[T,R]=(0,n.useState)({modal_static:!1});function z(){S(!1),R({modal_static:!1})}let K=()=>{N(!1),$({modal_static:!1}),a.replace("/book")},H=async()=>{var t,e,i;if(!I)return null;let a={headers:{"x-api-key":r.default.env.NEXT_PUBLIC_PAYUNIT_API_KEY||"sand_oCYvry8nlC13jE8vg8om99clqyHBAe",mode:"test","Content-Type":"application/json",Authorization:"Basic "+E}};try{let{data:e}=await b.default.get("https://app.payunit.net/api/gateway/paymentstatus/".concat(I),a);if(null==e?void 0:e.error)return j.toast.error(e.message),null;return(null==(t=e.data)?void 0:t.transaction_status)||null}catch(t){return O(!1),b.default.isAxiosError(t)?j.toast.error((null==(i=t.response)||null==(e=i.data)?void 0:e.message)||"Failed to check payment status"):j.toast.error("An unexpected error occurred"),null}},Y=async()=>{var t,e,i,a,r,s;let n=localStorage.getItem("phone"),o=localStorage.getItem("name"),l=localStorage.getItem("idCard"),h=localStorage.getItem("email"),c=null==(t=null==L?void 0:L.trip)?void 0:t.trip;if(!c)return void j.toast.error("No trip selected");let d=new y.default({length:7,dictionary:"alphanum_upper"}),u={phone_number:n?Number(n):null,number_of_seats:"1",ticket_type:"One-way",transaction_id:I||null,month:new Date(c.journey_date||c.journeyDate).toLocaleString("default",{month:"short"}),year:U.toString(),week:(0,f.default)(c.journey_date||c.journeyDate).format("W"),name:o||"",id_card_no:l||null,payer_email:h||null,trip_id:c.id,agency_name:c.agency_name||c.agencyName,agency_id:c.agency_id||c.agencyId,journey_date:c.journey_date||c.journeyDate,price:c.price,departure_city:c.from_location||c.from,arrival_city:c.to_location||c.to,departure_time:c.departure||c.departure_time,ticket_number:d(),seat:null,status:""};try{if(null==(a=null==L?void 0:L.user)||null==(i=a.data)||null==(e=i.data)?void 0:e.email){let{data:t}=await b.default.post("api/v1/bookings/create-booking/".concat(c.id),u);(null==t?void 0:t.error)?(j.toast.error(t.message),O(!1)):t.data&&(N(!0),A(t.data.seat),k(t.data.ticket_number||t.data.ticketNumber),localStorage.removeItem("phone"),localStorage.removeItem("name"),localStorage.removeItem("idCard"),localStorage.removeItem("email"),O(!1))}else{let{data:t}=await b.default.post("api/v1/bookings/anon-booking/".concat(c.id),u);(null==t?void 0:t.error)?(j.toast.error(t.message),O(!1)):t.data&&(N(!0),A(t.data.seat),k(t.data.ticket_number||t.data.ticketNumber),localStorage.removeItem("phone"),localStorage.removeItem("name"),localStorage.removeItem("idCard"),localStorage.removeItem("email"),O(!1))}}catch(t){O(!1),S(!0),b.default.isAxiosError(t)?j.toast.error((null==(s=t.response)||null==(r=s.data)?void 0:r.message)||"Failed to create booking"):j.toast.error("An unexpected error occurred")}};(0,n.useEffect)(()=>{I?(O(!0),(async()=>{let t=t=>new Promise(e=>setTimeout(e,t)),e=!0,i="";do(i=await H())&&"pending"!==i.toLowerCase()&&(e=!1),await t(3e4);while(e)"SUCCESS"===i?Y():(j.toast.error("Failed to process payment"),O(!1))})()):O(!1)},[I]);let V=null==(t=null==L?void 0:L.trip)?void 0:t.trip;return F?(0,e.jsx)(n.default.Fragment,{children:(0,e.jsx)("div",{className:"page-content",children:(0,e.jsx)(d.Container,{fluid:!0,className:"",children:(0,e.jsx)("div",{className:"loader-outer",children:(0,e.jsx)("div",{className:"loader-inner",children:(0,e.jsx)(v.SpinnerCircular,{color:"#bcc014",size:30})})})})})}):(0,e.jsx)(e.Fragment,{children:(0,e.jsx)("section",{className:"trip-search mb-5",children:(0,e.jsxs)("div",{className:"container pt-5",children:[C&&(0,e.jsxs)(_.Modal,{isOpen:q.modal_static,toggle:K,centered:!0,size:"sm",children:[(0,e.jsxs)(p.ModalHeader,{toggle:K,children:[i("Success"),"!"]}),(0,e.jsx)(g.ModalBody,{children:(0,e.jsx)(h.Row,{children:(0,e.jsxs)(c.Col,{lg:12,children:[(0,e.jsxs)("p",{className:"text-center booking-p",children:[i("ticket_num")," ",M]}),(0,e.jsxs)("p",{className:"text-center booking-p",children:[i("seat"),": ",B]}),V&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("p",{className:"text-center booking-p",children:[i("date"),": ",V.journey_date||V.journeyDate]}),(0,e.jsxs)("p",{className:"text-center booking-p",children:[i("time"),": ",V.departure||V.departure_time]}),(0,e.jsxs)("p",{className:"text-center booking-p",children:[i("to"),": ",V.to_location||V.to]})]})]})})}),(0,e.jsx)(m.ModalFooter,{children:(0,e.jsx)(u.Button,{color:"primary",onClick:K,children:"OK"})})]}),D&&(0,e.jsxs)(_.Modal,{isOpen:T.modal_static,toggle:z,centered:!0,size:"sm",children:[(0,e.jsxs)(p.ModalHeader,{toggle:z,children:[i("Failed"),"!"]}),(0,e.jsx)(g.ModalBody,{children:(0,e.jsx)(h.Row,{children:(0,e.jsx)(c.Col,{lg:12,children:(0,e.jsx)("p",{className:"text-center",children:i("failed_booking")})})})}),(0,e.jsx)(m.ModalFooter,{children:(0,e.jsx)(u.Button,{color:"primary",onClick:z,children:"OK"})})]})]})})})};function D(){let t,r=(0,i.c)(1);return r[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,e.jsx)(a.default,{children:(0,e.jsx)(I,{})}),r[0]=t):t=r[0],t}t.s(["default",()=>D],77750)}]);