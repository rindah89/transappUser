(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,78363,t=>{"use strict";var e=t.i(43476),i=t.i(932),a=t.i(71645),s=t.i(18566);t.s(["default",0,t=>{let r,n,o,l=(0,i.c)(5),{children:h}=t,c=(0,s.usePathname)();return l[0]!==c?(r=()=>{if("undefined"!=typeof document){var t;let e=(t=c)&&!(t.length<2)?t.charAt(1).toUpperCase()+t.slice(2):t;document.title="".concat(e," | Book on Transapp")}},n=[c],l[0]=c,l[1]=r,l[2]=n):(r=l[1],n=l[2]),(0,a.useEffect)(r,n),l[3]!==h?(o=(0,e.jsx)(a.default.Fragment,{children:h}),l[3]=h,l[4]=o):o=l[4],o}])},53528,(t,e,i)=>{"use strict";var a=(()=>{var t=Object.defineProperty,e=Object.getOwnPropertyDescriptor,i=Object.getOwnPropertyNames,a=Object.getOwnPropertySymbols,s=Object.prototype.hasOwnProperty,r=Object.prototype.propertyIsEnumerable,n=(e,i,a)=>i in e?t(e,i,{enumerable:!0,configurable:!0,writable:!0,value:a}):e[i]=a,o=(t,e)=>{for(var i in e||(e={}))s.call(e,i)&&n(t,i,e[i]);if(a)for(var i of a(e))r.call(e,i)&&n(t,i,e[i]);return t},l=(t,e,i)=>n(t,"symbol"!=typeof e?e+"":e,i),h={},c={DEFAULT_OPTIONS:()=>u,DEFAULT_UUID_LENGTH:()=>_,default:()=>g};for(var d in c)t(h,d,{get:c[d],enumerable:!0});var _=6,u={dictionary:"alphanum",shuffle:!0,debug:!1,length:6,counter:0},p=class{constructor(t={}){var e=this;l(this,"counter"),l(this,"debug"),l(this,"dict"),l(this,"version"),l(this,"dictIndex",0),l(this,"dictRange",[]),l(this,"lowerBound",0),l(this,"upperBound",0),l(this,"dictLength",0),l(this,"uuidLength"),l(this,"_digit_first_ascii",48),l(this,"_digit_last_ascii",58),l(this,"_alpha_lower_first_ascii",97),l(this,"_alpha_lower_last_ascii",123),l(this,"_hex_last_ascii",103),l(this,"_alpha_upper_first_ascii",65),l(this,"_alpha_upper_last_ascii",91),l(this,"_number_dict_ranges",{digits:[this._digit_first_ascii,this._digit_last_ascii]}),l(this,"_alpha_dict_ranges",{lowerCase:[this._alpha_lower_first_ascii,this._alpha_lower_last_ascii],upperCase:[this._alpha_upper_first_ascii,this._alpha_upper_last_ascii]}),l(this,"_alpha_lower_dict_ranges",{lowerCase:[this._alpha_lower_first_ascii,this._alpha_lower_last_ascii]}),l(this,"_alpha_upper_dict_ranges",{upperCase:[this._alpha_upper_first_ascii,this._alpha_upper_last_ascii]}),l(this,"_alphanum_dict_ranges",{digits:[this._digit_first_ascii,this._digit_last_ascii],lowerCase:[this._alpha_lower_first_ascii,this._alpha_lower_last_ascii],upperCase:[this._alpha_upper_first_ascii,this._alpha_upper_last_ascii]}),l(this,"_alphanum_lower_dict_ranges",{digits:[this._digit_first_ascii,this._digit_last_ascii],lowerCase:[this._alpha_lower_first_ascii,this._alpha_lower_last_ascii]}),l(this,"_alphanum_upper_dict_ranges",{digits:[this._digit_first_ascii,this._digit_last_ascii],upperCase:[this._alpha_upper_first_ascii,this._alpha_upper_last_ascii]}),l(this,"_hex_dict_ranges",{decDigits:[this._digit_first_ascii,this._digit_last_ascii],alphaDigits:[this._alpha_lower_first_ascii,this._hex_last_ascii]}),l(this,"_dict_ranges",{_number_dict_ranges:this._number_dict_ranges,_alpha_dict_ranges:this._alpha_dict_ranges,_alpha_lower_dict_ranges:this._alpha_lower_dict_ranges,_alpha_upper_dict_ranges:this._alpha_upper_dict_ranges,_alphanum_dict_ranges:this._alphanum_dict_ranges,_alphanum_lower_dict_ranges:this._alphanum_lower_dict_ranges,_alphanum_upper_dict_ranges:this._alphanum_upper_dict_ranges,_hex_dict_ranges:this._hex_dict_ranges}),l(this,"log",function(){for(var t=arguments.length,i=Array(t),a=0;a<t;a++)i[a]=arguments[a];let s=[...i];if(s[0]="[short-unique-id] ".concat(i[0]),!0===e.debug&&"undefined"!=typeof console&&null!==console)return void console.log(...s)}),l(this,"_normalizeDictionary",(t,e)=>{let i;if(t&&Array.isArray(t)&&t.length>1)i=t;else{i=[],this.dictIndex=0;let e="_".concat(t,"_dict_ranges"),a=this._dict_ranges[e],s=0;for(let[,t]of Object.entries(a)){let[e,i]=t;s+=Math.abs(i-e)}i=Array(s);let r=0;for(let[,t]of Object.entries(a)){this.dictRange=t,this.lowerBound=this.dictRange[0],this.upperBound=this.dictRange[1];let e=this.lowerBound<=this.upperBound,a=this.lowerBound,s=this.upperBound;if(e)for(let t=a;t<s;t++)i[r++]=String.fromCharCode(t),this.dictIndex=t;else for(let t=a;t>s;t--)i[r++]=String.fromCharCode(t),this.dictIndex=t}i.length=r}if(e){let t=i.length;for(let e=t-1;e>0;e--){let t=Math.floor(Math.random()*(e+1));[i[e],i[t]]=[i[t],i[e]]}}return i}),l(this,"setDictionary",(t,e)=>{this.dict=this._normalizeDictionary(t,e),this.dictLength=this.dict.length,this.setCounter(0)}),l(this,"seq",()=>this.sequentialUUID()),l(this,"sequentialUUID",()=>{let t=this.dictLength,e=this.dict,i=this.counter,a=[];do{let s=i%t;i=Math.trunc(i/t),a.push(e[s])}while(0!==i)let s=a.join("");return this.counter+=1,s}),l(this,"rnd",function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.uuidLength||_;return e.randomUUID(t)}),l(this,"randomUUID",function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.uuidLength||_;if(null==t||t<1)throw Error("Invalid UUID Length Provided");let i=Array(t),a=e.dictLength,s=e.dict;for(let e=0;e<t;e++){let t=Math.floor(Math.random()*a);i[e]=s[t]}return i.join("")}),l(this,"fmt",(t,e)=>this.formattedUUID(t,e)),l(this,"formattedUUID",(t,e)=>{let i={$r:this.randomUUID,$s:this.sequentialUUID,$t:this.stamp};return t.replace(/\$[rs]\d{0,}|\$t0|\$t[1-9]\d{1,}/g,t=>{let a=t.slice(0,2),s=Number.parseInt(t.slice(2),10);return"$s"===a?i[a]().padStart(s,"0"):"$t"===a&&e?i[a](s,e):i[a](s)})}),l(this,"availableUUIDs",function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.uuidLength;return Number.parseFloat(([...new Set(e.dict)].length**t).toFixed(0))}),l(this,"_collisionCache",new Map),l(this,"approxMaxBeforeCollision",function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.availableUUIDs(e.uuidLength),i=e._collisionCache.get(t);if(void 0!==i)return i;let a=Number.parseFloat(Math.sqrt(Math.PI/2*t).toFixed(20));return e._collisionCache.set(t,a),a}),l(this,"collisionProbability",function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.availableUUIDs(e.uuidLength),i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.uuidLength;return Number.parseFloat((e.approxMaxBeforeCollision(t)/e.availableUUIDs(i)).toFixed(20))}),l(this,"uniqueness",function(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.availableUUIDs(e.uuidLength),i=Number.parseFloat((1-e.approxMaxBeforeCollision(t)/t).toFixed(20));return i>1?1:i<0?0:i}),l(this,"getVersion",()=>this.version),l(this,"stamp",(t,e)=>{let i=Math.floor((e||new Date)/1e3).toString(16);if("number"==typeof t&&0===t)return i;if("number"!=typeof t||t<10)throw Error("Param finalLength must be a number greater than or equal to 10,\nor 0 if you want the raw hexadecimal timestamp");let a=t-9,s=Math.round(Math.random()*(a>15?15:a)),r=this.randomUUID(a);return"".concat(r.substring(0,s)).concat(i).concat(r.substring(s)).concat(s.toString(16))}),l(this,"parseStamp",(t,e)=>{if(e&&!/t0|t[1-9]\d{1,}/.test(e))throw Error("Cannot extract date from a formated UUID with no timestamp in the format");let i=e?e.replace(/\$[rs]\d{0,}|\$t0|\$t[1-9]\d{1,}/g,t=>({$r:t=>[...Array(t)].map(()=>"r").join(""),$s:t=>[...Array(t)].map(()=>"s").join(""),$t:t=>[...Array(t)].map(()=>"t").join("")})[t.slice(0,2)](Number.parseInt(t.slice(2),10))).replace(/^(.*?)(t{8,})(.*)$/g,(e,i,a)=>t.substring(i.length,i.length+a.length)):t;if(8===i.length)return new Date(1e3*Number.parseInt(i,16));if(i.length<10)throw Error("Stamp length invalid");let a=Number.parseInt(i.substring(i.length-1),16);return new Date(1e3*Number.parseInt(i.substring(a,a+8),16))}),l(this,"setCounter",t=>{this.counter=t}),l(this,"validate",(t,e)=>{let i=e?this._normalizeDictionary(e):this.dict;return t.split("").every(t=>i.includes(t))});const i=o(o({},u),t);this.counter=0,this.debug=!1,this.dict=[],this.version="5.3.2";const{dictionary:a,shuffle:s,length:r,counter:n}=i;this.uuidLength=r,this.setDictionary(a,s),this.setCounter(n),this.debug=i.debug,this.log(this.dict),this.log("Generator instantiated with Dictionary Size ".concat(this.dictLength," and counter set to ").concat(this.counter)),this.log=this.log.bind(this),this.setDictionary=this.setDictionary.bind(this),this.setCounter=this.setCounter.bind(this),this.seq=this.seq.bind(this),this.sequentialUUID=this.sequentialUUID.bind(this),this.rnd=this.rnd.bind(this),this.randomUUID=this.randomUUID.bind(this),this.fmt=this.fmt.bind(this),this.formattedUUID=this.formattedUUID.bind(this),this.availableUUIDs=this.availableUUIDs.bind(this),this.approxMaxBeforeCollision=this.approxMaxBeforeCollision.bind(this),this.collisionProbability=this.collisionProbability.bind(this),this.uniqueness=this.uniqueness.bind(this),this.getVersion=this.getVersion.bind(this),this.stamp=this.stamp.bind(this),this.parseStamp=this.parseStamp.bind(this)}};l(p,"default",p);var g=p;return((a,r,n,o)=>{if(r&&"object"==typeof r||"function"==typeof r)for(let l of i(r))s.call(a,l)||l===n||t(a,l,{get:()=>r[l],enumerable:!(o=e(r,l))||o.enumerable});return a})(t({},"__esModule",{value:!0}),h)})();e.exports=a.default,"undefined"!=typeof window&&(a=a.default)},71526,t=>{"use strict";var e=t.i(43476),i=t.i(932),a=t.i(78363),s=t.i(71645),r=t.i(29685),n=t.i(1381),o=t.i(34423),l=t.i(78158),h=t.i(92094),c=t.i(18102),d=t.i(27179),_=t.i(4794),u=t.i(30671),p=t.i(52353),g=t.i(66540),m=t.i(81949),f=t.i(53528),b=t.i(9327);t.i(85269);var y=t.i(22831),x=t.i(18566),v=t.i(5766);let j=new Date().getFullYear(),w=()=>{var t;let{t:i}=(0,y.useTranslation)(),a=(0,x.useRouter)(),w=localStorage.getItem("transactionID"),[U,I]=(0,s.useState)(!1),[D,S]=(0,s.useState)(!1),[C,N]=(0,s.useState)(""),[M,k]=(0,s.useState)(null),{state:O}=(0,r.useStateMachine)({updateSearch:n.updateSearch,updateAction:n.updateAction}),[B,L]=(0,s.useState)(!0),[F,A]=(0,s.useState)({modal_static:!1}),[P,$]=(0,s.useState)({modal_static:!1});function q(){I(!1),$({modal_static:!1})}let E=()=>{S(!1),A({modal_static:!1}),a.replace("/book")},T=async()=>{var t,e,i,a,s,r;let n=localStorage.getItem("phone"),o=localStorage.getItem("name"),l=localStorage.getItem("idCard"),h=localStorage.getItem("email"),c=null==(t=null==O?void 0:O.trip)?void 0:t.trip;if(!c){v.toast.error("No trip selected"),L(!1);return}let d=new f.default({length:7,dictionary:"alphanum_upper"}),_={phone_number:n?Number(n):null,number_of_seats:"1",ticket_type:"One-way",transaction_id:w||null,month:new Date(c.journey_date||c.journeyDate).toLocaleString("default",{month:"short"}),year:j.toString(),week:(0,g.default)(c.journey_date||c.journeyDate).format("W"),name:o||"",id_card_no:l||null,payer_email:h||null,trip_id:c.id,ticket_number:d(),seat:null,status:"",agency_name:c.agency_name||c.agencyName,agency_id:c.agency_id||c.agencyId,journey_date:c.journey_date||c.journeyDate,price:c.price,departure_city:c.from_location||c.from,arrival_city:c.to_location||c.to,departure_time:c.departure||c.departure_time};try{if(null==(a=null==O?void 0:O.user)||null==(i=a.data)||null==(e=i.data)?void 0:e.email){let{data:t}=await m.default.post("api/v1/bookings/create-booking/".concat(c.id),_);(null==t?void 0:t.error)?(v.toast.error(t.message),L(!1)):t.data&&(S(!0),k(t.data.seat),N(t.data.ticket_number||t.data.ticketNumber),localStorage.removeItem("phone"),localStorage.removeItem("name"),localStorage.removeItem("idCard"),localStorage.removeItem("email"),L(!1))}else{let{data:t}=await m.default.post("api/v1/bookings/anon-booking/".concat(c.id),_);(null==t?void 0:t.error)?(v.toast.error(t.message),L(!1)):t.data&&(S(!0),k(t.data.seat),N(t.data.ticket_number||t.data.ticketNumber),localStorage.removeItem("phone"),localStorage.removeItem("name"),localStorage.removeItem("idCard"),localStorage.removeItem("email"),L(!1))}}catch(t){L(!1),I(!0),m.default.isAxiosError(t)?v.toast.error((null==(r=t.response)||null==(s=r.data)?void 0:s.message)||"Failed to create booking"):v.toast.error("An unexpected error occurred")}};(0,s.useEffect)(()=>{w?T():L(!1)},[w]);let R=null==(t=null==O?void 0:O.trip)?void 0:t.trip;return B?(0,e.jsx)(s.default.Fragment,{children:(0,e.jsx)("div",{className:"page-content",children:(0,e.jsx)(h.Container,{fluid:!0,className:"",children:(0,e.jsx)("div",{className:"loader-outer",children:(0,e.jsx)("div",{className:"loader-inner",children:(0,e.jsx)(b.SpinnerCircular,{color:"#bcc014",size:30})})})})})}):(0,e.jsx)(e.Fragment,{children:(0,e.jsx)("section",{className:"trip-search mb-5",children:(0,e.jsxs)("div",{className:"container pt-5",children:[D&&(0,e.jsxs)(d.Modal,{isOpen:F.modal_static,toggle:E,centered:!0,size:"sm",children:[(0,e.jsxs)(_.ModalHeader,{toggle:E,children:[i("Success"),"!"]}),(0,e.jsx)(u.ModalBody,{children:(0,e.jsx)(o.Row,{children:(0,e.jsxs)(l.Col,{lg:12,children:[(0,e.jsxs)("p",{className:"text-center booking-p",children:[i("ticket_num")," ",C]}),(0,e.jsxs)("p",{className:"text-center booking-p",children:[i("seat"),": ",M]}),R&&(0,e.jsxs)(e.Fragment,{children:[(0,e.jsxs)("p",{className:"text-center booking-p",children:[i("date"),": ",R.journey_date||R.journeyDate]}),(0,e.jsxs)("p",{className:"text-center booking-p",children:[i("time"),": ",R.departure||R.departure_time]}),(0,e.jsxs)("p",{className:"text-center booking-p",children:[i("to"),": ",R.to_location||R.to]})]})]})})}),(0,e.jsx)(p.ModalFooter,{children:(0,e.jsx)(c.Button,{color:"primary",onClick:E,children:"OK"})})]}),U&&(0,e.jsxs)(d.Modal,{isOpen:P.modal_static,toggle:q,centered:!0,size:"sm",children:[(0,e.jsxs)(_.ModalHeader,{toggle:q,children:[i("Failed"),"!"]}),(0,e.jsx)(u.ModalBody,{children:(0,e.jsx)(o.Row,{children:(0,e.jsx)(l.Col,{lg:12,children:(0,e.jsx)("p",{className:"text-center",children:i("failed_booking")})})})}),(0,e.jsx)(p.ModalFooter,{children:(0,e.jsx)(c.Button,{color:"primary",onClick:q,children:"OK"})})]})]})})})};function U(){let t,s=(0,i.c)(1);return s[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,e.jsx)(a.default,{children:(0,e.jsx)(w,{})}),s[0]=t):t=s[0],t}t.s(["default",()=>U],71526)}]);