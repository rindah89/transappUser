module.exports=[20908,(a,b,c)=>{"use strict";c.__esModule=!0,c.default=void 0,c.isTrivialHref=h,c.useButtonProps=i;var d=function(a,b){if(a&&a.__esModule)return a;if(null===a||"object"!=typeof a&&"function"!=typeof a)return{default:a};var c=g(void 0);if(c&&c.has(a))return c.get(a);var d={__proto__:null},e=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var f in a)if("default"!==f&&({}).hasOwnProperty.call(a,f)){var h=e?Object.getOwnPropertyDescriptor(a,f):null;h&&(h.get||h.set)?Object.defineProperty(d,f,h):d[f]=a[f]}return d.default=a,c&&c.set(a,d),d}(a.r(72131)),e=a.r(87924);let f=["as","disabled"];function g(a){if("function"!=typeof WeakMap)return null;var b=new WeakMap,c=new WeakMap;return(g=function(a){return a?c:b})(a)}function h(a){return!a||"#"===a.trim()}function i({tagName:a,disabled:b,href:c,target:d,rel:e,role:f,onClick:g,tabIndex:i=0,type:j}){a||(a=null!=c||null!=d||null!=e?"a":"button");let k={tagName:a};if("button"===a)return[{type:j||"button",disabled:b},k];let l=d=>{((b||"a"===a&&h(c))&&d.preventDefault(),b)?d.stopPropagation():null==g||g(d)};return"a"===a&&(c||(c="#"),b&&(c=void 0)),[{role:null!=f?f:"button",disabled:void 0,tabIndex:b?void 0:i,href:c,target:"a"===a?d:void 0,"aria-disabled":b||void 0,rel:"a"===a?e:void 0,onClick:l,onKeyDown:a=>{" "===a.key&&(a.preventDefault(),l(a))}},k]}let j=d.forwardRef((a,b)=>{let{as:c,disabled:d}=a,g=function(a,b){if(null==a)return{};var c={};for(var d in a)if(({}).hasOwnProperty.call(a,d)){if(b.indexOf(d)>=0)continue;c[d]=a[d]}return c}(a,f),[h,{tagName:j}]=i(Object.assign({tagName:c,disabled:d},g));return(0,e.jsx)(j,Object.assign({},g,h,{ref:b}))});j.displayName="Button",c.default=j},4998,a=>{"use strict";var b=a.i(87924),c=a.i(46088),d=a.i(72131),e=a.i(5579),f=a.i(28525);let g=d.createContext({prefixes:{},breakpoints:["xxl","xl","lg","md","sm","xs"],minBreakpoint:"xs"}),{Consumer:h,Provider:i}=g;function j(a,b){let{prefixes:c}=(0,d.useContext)(g);return a||c[b]||b}function k(){let{breakpoints:a}=(0,d.useContext)(g);return a}function l(){let{minBreakpoint:a}=(0,d.useContext)(g);return a}let m=d.forwardRef(({bsPrefix:a,className:c,as:d="div",...e},g)=>{let h=j(a,"row"),i=k(),m=l(),n=`${h}-cols`,o=[];return i.forEach(a=>{let b,c=e[a];delete e[a],null!=c&&"object"==typeof c?{cols:b}=c:b=c;let d=a!==m?`-${a}`:"";null!=b&&o.push(`${n}${d}-${b}`)}),(0,b.jsx)(d,{ref:g,...e,className:(0,f.default)(c,h,...o)})});m.displayName="Row";let n=d.forwardRef((a,c)=>{let[{className:d,...e},{as:g="div",bsPrefix:h,spans:i}]=function({as:a,bsPrefix:b,className:c,...d}){b=j(b,"col");let e=k(),g=l(),h=[],i=[];return e.forEach(a=>{let c,e,f,j=d[a];delete d[a],"object"==typeof j&&null!=j?{span:c,offset:e,order:f}=j:c=j;let k=a!==g?`-${a}`:"";c&&h.push(!0===c?`${b}${k}`:`${b}${k}-${c}`),null!=f&&i.push(`order${k}-${f}`),null!=e&&i.push(`offset${k}-${e}`)}),[{...d,className:(0,f.default)(c,...h,...i)},{as:a,bsPrefix:b,spans:h}]}(a);return(0,b.jsx)(g,{...e,ref:c,className:(0,f.default)(d,!i.length&&h)})});n.displayName="Col";let o=d.forwardRef(({className:a,bsPrefix:c,as:d="div",...e},g)=>(c=j(c,"card-body"),(0,b.jsx)(d,{ref:g,className:(0,f.default)(a,c),...e})));o.displayName="CardBody";let p=d.forwardRef(({className:a,bsPrefix:c,as:d="div",...e},g)=>(c=j(c,"card-footer"),(0,b.jsx)(d,{ref:g,className:(0,f.default)(a,c),...e})));p.displayName="CardFooter";let q=d.createContext(null);q.displayName="CardHeaderContext";let r=d.forwardRef(({bsPrefix:a,className:c,as:e="div",...g},h)=>{let i=j(a,"card-header"),k=(0,d.useMemo)(()=>({cardHeaderBsPrefix:i}),[i]);return(0,b.jsx)(q.Provider,{value:k,children:(0,b.jsx)(e,{ref:h,...g,className:(0,f.default)(c,i)})})});r.displayName="CardHeader";let s=d.forwardRef(({bsPrefix:a,className:c,variant:d,as:e="img",...g},h)=>{let i=j(a,"card-img");return(0,b.jsx)(e,{ref:h,className:(0,f.default)(d?`${i}-${d}`:i,c),...g})});s.displayName="CardImg";let t=d.forwardRef(({className:a,bsPrefix:c,as:d="div",...e},g)=>(c=j(c,"card-img-overlay"),(0,b.jsx)(d,{ref:g,className:(0,f.default)(a,c),...e})));t.displayName="CardImgOverlay";let u=d.forwardRef(({className:a,bsPrefix:c,as:d="a",...e},g)=>(c=j(c,"card-link"),(0,b.jsx)(d,{ref:g,className:(0,f.default)(a,c),...e})));u.displayName="CardLink";let v=a=>d.forwardRef((c,d)=>(0,b.jsx)("div",{...c,ref:d,className:(0,f.default)(c.className,a)})),w=v("h6"),x=d.forwardRef(({className:a,bsPrefix:c,as:d=w,...e},g)=>(c=j(c,"card-subtitle"),(0,b.jsx)(d,{ref:g,className:(0,f.default)(a,c),...e})));x.displayName="CardSubtitle";let y=d.forwardRef(({className:a,bsPrefix:c,as:d="p",...e},g)=>(c=j(c,"card-text"),(0,b.jsx)(d,{ref:g,className:(0,f.default)(a,c),...e})));y.displayName="CardText";let z=v("h5"),A=d.forwardRef(({className:a,bsPrefix:c,as:d=z,...e},g)=>(c=j(c,"card-title"),(0,b.jsx)(d,{ref:g,className:(0,f.default)(a,c),...e})));A.displayName="CardTitle";let B=d.forwardRef(({bsPrefix:a,className:c,bg:d,text:e,border:g,body:h=!1,children:i,as:k="div",...l},m)=>{let n=j(a,"card");return(0,b.jsx)(k,{ref:m,...l,className:(0,f.default)(c,n,d&&`bg-${d}`,e&&`text-${e}`,g&&`border-${g}`),children:h?(0,b.jsx)(o,{children:i}):i})});B.displayName="Card";let C=Object.assign(B,{Img:s,Title:A,Subtitle:x,Body:o,Link:u,Text:y,Header:r,Footer:p,ImgOverlay:t});var D=a.i(20908);let E=d.forwardRef(({as:a,bsPrefix:c,variant:d="primary",size:e,active:g=!1,disabled:h=!1,className:i,...k},l)=>{let m=j(c,"btn"),[n,{tagName:o}]=(0,D.useButtonProps)({tagName:a,disabled:h,...k});return(0,b.jsx)(o,{...n,...k,ref:l,disabled:h,className:(0,f.default)(i,m,g&&"active",d&&`${m}-${d}`,e&&`${m}-${e}`,k.href&&h&&"disabled")})});E.displayName="Button";var F=a.i(50944),G=a.i(6704),H=a.i(18213);a.i(2407);var I=a.i(78134),J=a.i(30767),K=a.i(52477),L=a.i(92676),M=a.i(83490);let N=()=>{let{t:a}=(0,I.useTranslation)(),c=(0,F.useRouter)(),[f,g]=(0,d.useState)(!1),[h,i]=(0,d.useState)({name:"",idCardNo:null,payerName:"",phoneNumber:null,payerEmail:"",numberOfSeats:1,ticketType:"One-way"}),{name:j,idCardNo:k,payerName:l,phoneNumber:o,payerEmail:p,numberOfSeats:q,ticketType:r}=h;(0,d.useEffect)(()=>{"undefined"!=typeof document&&document.body.setAttribute("style","background: #f8f8f8!important;")},[]);let s=a=>b=>{i({...h,[a]:b.target.value})},{actions:t,state:u}=(0,J.useStateMachine)({updateBooking:K.updateBooking,updateAction:K.updateAction,updateUser:K.updateUser}),v=async a=>{a.preventDefault(),g(!0);let b=u?.trip?.trip;if(!b){G.toast.error("No trip selected"),g(!1);return}try{if(u?.user?.data?.data?.email){let{data:a}=await M.default.post(`api/v1/bookings/create-booking/${b.id}`,h);a?.error?G.toast.error(a.message):(t.updateBooking({booking:a}),w(),G.toast.success(a.message),g(!1))}else{let{data:a}=await M.default.post(`api/v1/bookings/anon-booking/${b.id}`,h);a?.error?G.toast.error(a.message):(t.updateBooking({booking:a}),c.push("/ticket-summary"),G.toast.success(a.message),g(!1))}}catch(a){M.default.isAxiosError(a)?G.toast.error(a.response?.data?.message||"Failed to create booking"):G.toast.error("An unexpected error occurred"),g(!1)}},w=async()=>{let a=new L.default({length:7,dictionary:"alphanum_upper"}),b={"Content-Type":"application/json",Authorization:"Basic 4d70631d-397c-4efd-929a-87fcd3a9d1622a8f415d-d9d2-4834-a573-b12c1375b94c","x-api-key":process.env.NEXT_PUBLIC_PAYUNIT_API_KEY||"sand_wjYGZXPZoSYMsV8p8jvlXjMCnK1bnW",mode:"test"},d=u?.trip?.trip,e={total_amount:d?.price||100,currency:"XAF",transaction_id:a(),return_url:"http://localhost:3000/api/v1/bookings/payunit-return"};try{let{data:a}=await M.default.post("https://app.payunit.net/api/gateway/initialize",e,{headers:b});a?.error?G.toast.error(a.message):c.push("/ticket-summary")}catch(a){M.default.isAxiosError(a)?G.toast.error(a.response?.data?.message||"Payment initialization failed"):G.toast.error("An unexpected error occurred")}},x=u?.trip?.trip;return(0,b.jsx)("div",{className:"container ticket-form",children:(0,b.jsxs)(m,{children:[(0,b.jsx)(n,{lg:6,children:(0,b.jsxs)("form",{children:[(0,b.jsx)(C,{children:(0,b.jsxs)(C.Body,{children:[(0,b.jsx)("h6",{children:"Enter Passenger Details"}),(0,b.jsxs)(m,{children:[(0,b.jsx)(n,{lg:6,children:(0,b.jsxs)("div",{className:"form-group",children:[(0,b.jsx)("label",{htmlFor:"name",children:a("name")}),(0,b.jsx)("input",{type:"text",name:"name",id:"name",required:!0,className:"form-control",onChange:s("name"),value:j})]})}),(0,b.jsx)(n,{lg:6,children:(0,b.jsxs)("div",{className:"form-group",children:[(0,b.jsx)("label",{htmlFor:"idCardNo",children:a("id_card")}),(0,b.jsx)("input",{type:"text",name:"idCardNo",id:"idCardNo",required:!0,className:"form-control",onChange:s("idCardNo"),value:k||""})]})})]})]})}),(0,b.jsx)(C,{children:(0,b.jsxs)(C.Body,{children:[(0,b.jsx)("h6",{children:"Details of Person Paying"}),(0,b.jsxs)(m,{children:[(0,b.jsx)(n,{lg:6,children:(0,b.jsxs)("div",{className:"form-group",children:[(0,b.jsx)("label",{htmlFor:"payerName",children:a("name")}),(0,b.jsx)("input",{type:"text",name:"payerName",id:"payerName",required:!0,className:"form-control",onChange:s("payerName"),value:l})]})}),(0,b.jsx)(n,{lg:6,children:(0,b.jsxs)("div",{className:"form-group",children:[(0,b.jsx)("label",{htmlFor:"payerEmail",children:a("email_address")}),(0,b.jsx)("input",{type:"email",name:"payerEmail",id:"payerEmail",required:!0,className:"form-control",onChange:s("payerEmail"),value:p})]})}),(0,b.jsx)(n,{lg:6,children:(0,b.jsxs)("div",{className:"form-group",children:[(0,b.jsx)("label",{htmlFor:"phoneNumber",children:a("phone")}),(0,b.jsx)("input",{type:"number",name:"phoneNumber",id:"phoneNumber",required:!0,className:"form-control",onChange:s("phoneNumber"),value:o||""})]})})]})]})}),(0,b.jsx)(C,{children:(0,b.jsxs)(C.Body,{children:[(0,b.jsx)("small",{children:"You will be redirected to related website to do this transaction"}),(0,b.jsx)(m,{className:"mt-5",children:(0,b.jsx)(n,{lg:12,children:f?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(e.SpinnerCircular,{})," ",(0,b.jsx)("p",{children:"Just a moment please buddy..."})]}):(0,b.jsx)(E,{block:!0,variant:"success",onClick:v,children:"MAKE PAYMENT NOW"})})})]})})]})}),(0,b.jsx)(n,{lg:6,className:"mt-3",children:x&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h6",{children:"Onward Trip Details"}),(0,b.jsx)("small",{children:x.agency_name||x.agencyName})]}),(0,b.jsx)(m,{children:(0,b.jsx)(n,{lg:6,children:(0,b.jsxs)(m,{children:[(0,b.jsx)(n,{children:(0,b.jsx)("small",{children:x.from_location||x.from})}),(0,b.jsx)(n,{children:(0,b.jsx)("span",{children:" To "})}),(0,b.jsx)(n,{children:(0,b.jsx)("small",{children:x.to_location||x.to})})]})})}),(0,b.jsxs)(m,{children:[(0,b.jsx)(n,{children:(0,b.jsx)("small",{children:x.journey_date||x.journeyDate})}),(0,b.jsx)(n,{children:(0,b.jsx)("small",{children:x.departure||x.departure_time})}),(0,b.jsx)(n,{children:(0,b.jsx)("small",{children:x.arrival?(0,H.default)(x.arrival).format("LT"):""})})]}),(0,b.jsx)("hr",{className:"mt-4"}),(0,b.jsx)(m,{children:(0,b.jsx)(n,{children:(0,b.jsx)("h6",{children:"Passenger Details"})})}),(0,b.jsxs)(m,{children:[(0,b.jsxs)(n,{children:[(0,b.jsx)("div",{children:(0,b.jsx)("small",{children:"Name"})}),(0,b.jsx)("div",{children:(0,b.jsx)("small",{children:j})})]}),(0,b.jsxs)(n,{children:[(0,b.jsx)("div",{children:(0,b.jsx)("small",{children:"ID Card"})}),(0,b.jsx)("div",{children:(0,b.jsx)("small",{children:k})})]}),(0,b.jsxs)(n,{children:[(0,b.jsx)("div",{children:(0,b.jsx)("small",{children:"Number Of Seats"})}),(0,b.jsx)("div",{children:(0,b.jsx)("small",{children:q})})]}),(0,b.jsxs)(n,{children:[(0,b.jsx)("div",{children:(0,b.jsx)("small",{children:"Type"})}),(0,b.jsx)("div",{children:(0,b.jsx)("small",{children:r})})]})]})]})})]})})};function O(){return(0,b.jsx)(c.default,{children:(0,b.jsx)(N,{})})}a.s(["default",()=>O],4998)}];

//# sourceMappingURL=_bb6ee5ff._.js.map