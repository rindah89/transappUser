{"version":3,"sources":["../../../../node_modules/next/src/server/route-modules/app-page/vendored/contexts/app-router-context.ts","../../../../node_modules/next/src/server/route-modules/app-page/vendored/contexts/hooks-client-context.ts","../../../../node_modules/next/src/server/route-modules/app-page/vendored/contexts/server-inserted-html.ts","../../../../src/components/NonAuthLayout.tsx","../../../../src/components/Common/ForgotPassword.tsx","../../../../src/app/user-forgot/page.tsx","../../../../src/pages/Users/UserForgot.tsx"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].AppRouterContext\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].HooksClientContext\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].ServerInsertedHtml\n","'use client'\n\nimport React, { useEffect } from 'react';\nimport { usePathname } from 'next/navigation';\n\ninterface NonAuthLayoutProps {\n  children: React.ReactNode;\n}\n\nconst NonAuthLayout: React.FC<NonAuthLayoutProps> = ({ children }) => {\n  const pathname = usePathname();\n\n  useEffect(() => {\n    if (typeof document !== 'undefined') {\n      const capitalizeFirstLetter = (str: string): string => {\n        if (!str || str.length < 2) return str;\n        return str.charAt(1).toUpperCase() + str.slice(2);\n      };\n\n      const currentPage = capitalizeFirstLetter(pathname);\n      document.title = `${currentPage} | Book on Transapp`;\n    }\n  }, [pathname]);\n\n  return <React.Fragment>{children}</React.Fragment>;\n};\n\nexport default NonAuthLayout;\n","'use client'\n\nimport React, { useState } from 'react';\nimport { useRouter } from 'next/navigation';\nimport axios from 'axios';\nimport { useTranslation } from 'react-i18next';\nimport Image from 'next/image';\nimport logo from '../../assets/images/transapp-logo.svg';\nimport { toast } from 'react-hot-toast';\nimport { useForm } from 'react-hook-form';\n\ninterface ForgotPasswordProps {\n  route: string;\n  buttonText?: string;\n}\n\ninterface ForgotFormData {\n  email: string;\n}\n\ninterface ResetFormData {\n  password: string;\n  resetCode: string;\n}\n\nconst ForgotPassword: React.FC<ForgotPasswordProps> = ({ route, buttonText = 'forgot' }) => {\n  const { t } = useTranslation();\n  const router = useRouter();\n  const [visible, setVisible] = useState<boolean>(false);\n  const [email, setEmail] = useState<string>('');\n  const [password, setPassword] = useState<string>('');\n  const [resetCode, setResetCode] = useState<string>('');\n  const [isPasswordVisible, setIsPasswordVisible] = useState<boolean>(false);\n\n  const togglePassword = (): void => {\n    setIsPasswordVisible(!isPasswordVisible);\n  };\n\n  const {\n    handleSubmit,\n    formState: { errors },\n  } = useForm<ForgotFormData | ResetFormData>();\n\n  const onSubmitForgot = async (): Promise<void> => {\n    try {\n      if (!email) {\n        toast.error('Email is required');\n        return;\n      }\n\n      const { data } = await axios.post<{ error: boolean; message: string }>(`api/v1/${route}`, { email });\n      if (data.error) {\n        toast.error(data.message || 'Error occurred');\n      } else {\n        toast.success(data.message || 'Password reset email sent. Please check your email.');\n        setVisible(true);\n      }\n    } catch (error: unknown) {\n      if (axios.isAxiosError(error)) {\n        toast.error(error.response?.data?.message || 'Failed to process request');\n      } else {\n        toast.error('An unexpected error occurred');\n      }\n    }\n  };\n\n  const onSubmitReset = async (): Promise<void> => {\n    try {\n      if (!email || !password) {\n        toast.error('Email and password are required');\n        return;\n      }\n\n      if (password.length < 6) {\n        toast.error('Password must be at least 6 characters');\n        return;\n      }\n\n      const { data } = await axios.post<{ error: boolean; message: string }>('api/v1/users/user-reset', {\n        email,\n        password,\n        resetCode, // For backward compatibility, but Supabase Auth uses token from URL\n      });\n      if (data.error) {\n        toast.error(data.message || 'Error occurred');\n      } else {\n        toast.success(data.message || 'Password reset successful');\n        router.push('/login');\n      }\n    } catch (error: unknown) {\n      if (axios.isAxiosError(error)) {\n        toast.error(error.response?.data?.message || 'Failed to reset password');\n      } else {\n        toast.error('An unexpected error occurred');\n      }\n    }\n  };\n\n  return (\n    <div\n      className=\"min-vh-100 d-flex flex-column opacity-mask\"\n      data-opacity-mask=\"rgba(0, 0, 0, 0.4)\"\n    >\n      <div className=\"container my-auto\">\n        <div className=\"row\">\n          <div className=\"col-md-9 col-lg-7 col-xl-5 mx-auto my-4\">\n            <div className=\"panel header_2 center\">\n              <figure>\n                <a href=\"#0\">\n                  <Image src={logo} width={86} height={80} alt=\"TransApp Logo\" />\n                </a>\n              </figure>\n\n              <form\n                className=\"input_style_1\"\n                onSubmit={!visible ? handleSubmit(onSubmitForgot) : handleSubmit(onSubmitReset)}\n              >\n                {!visible ? (\n                  <div className=\"form-group\">\n                    <label htmlFor=\"email_address\">{t('email_address')}</label>\n                    <input\n                      type=\"email\"\n                      name=\"email_address\"\n                      id=\"email_address\"\n                      value={email}\n                      onChange={(e) => setEmail(e.target.value)}\n                      className=\"form-control\"\n                    />\n                    {errors.email && (\n                      <p style={{ color: 'red' }}>{t('email_err')}</p>\n                    )}\n                  </div>\n                ) : (\n                  <>\n                    <label htmlFor=\"password\">{t('password')}</label>\n                    <div className=\"row\">\n                      <div className=\"input-group mb-3 col-lg-12\">\n                        <input\n                          type={isPasswordVisible ? 'text' : 'password'}\n                          name=\"password\"\n                          id=\"password\"\n                          className=\"form-control\"\n                          value={password}\n                          onChange={(e) => setPassword(e.target.value)}\n                        />\n                        <div className=\"input-group-prepend bg-white\">\n                          <span\n                            className=\"input-group-text border-left-0 rounded-right bg-white\"\n                            id=\"basic-addon1\"\n                          >\n                            <i\n                              className={isPasswordVisible ? 'fas fa-eye' : 'fas fa-eye-slash'}\n                              onClick={togglePassword}\n                              style={{ cursor: 'pointer' }}\n                            />\n                          </span>\n                        </div>\n                      </div>\n                    </div>\n\n                    {errors.password && (\n                      <p style={{ color: 'red' }}>{t('password_err')}</p>\n                    )}\n\n                    <div className=\"form-group\">\n                      <label htmlFor=\"resetCode\">{t('resetCode')}</label>\n                      <input\n                        type=\"text\"\n                        name=\"resetCode\"\n                        id=\"resetCode\"\n                        value={resetCode}\n                        onChange={(e) => setResetCode(e.target.value)}\n                        className=\"form-control\"\n                      />\n                      {errors.resetCode && (\n                        <p style={{ color: 'red' }}>{t('password_err')}</p>\n                      )}\n                    </div>\n                  </>\n                )}\n\n                <button type=\"submit\" className=\"btn_1 full-width\">\n                  {!visible ? t('submit') : t('reset_password')}\n                </button>\n              </form>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default ForgotPassword;\n","'use client'\n\nimport React from 'react';\nimport NonAuthLayout from '../../components/NonAuthLayout';\nimport UserForgot from '../../pages/Users/UserForgot';\n\nexport default function UserForgotPage() {\n  return (\n    <NonAuthLayout>\n      <UserForgot />\n    </NonAuthLayout>\n  );\n}\n","'use client'\n\nimport React from \"react\";\nimport ForgotPassword from \"../../components/Common/ForgotPassword\";\n\nconst UserForgot: React.FC = () => {\n  return (\n    <React.Fragment>\n      <ForgotPassword route=\"users/user-forgot\" buttonText=\"forgot\" />\n    </React.Fragment>\n  );\n};\n\nexport default UserForgot;\n"],"names":["module","exports","require","vendored","AppRouterContext","HooksClientContext","ServerInsertedHtml"],"mappings":"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","ignoreList":[0,1,2]}