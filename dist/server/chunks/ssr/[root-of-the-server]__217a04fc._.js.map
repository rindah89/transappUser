{"version":3,"sources":["../../../../node_modules/next/src/server/route-modules/app-page/vendored/contexts/app-router-context.ts","../../../../node_modules/next/src/server/route-modules/app-page/vendored/contexts/hooks-client-context.ts","../../../../node_modules/next/src/server/route-modules/app-page/vendored/contexts/server-inserted-html.ts","../../../../src/components/NonAuthLayout.tsx","../../../../src/components/Common/Form.tsx","../../../../src/app/trip-login/page.tsx","../../../../src/pages/Users/TripLogin.tsx"],"sourcesContent":["module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].AppRouterContext\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].HooksClientContext\n","module.exports = (\n  require('../../module.compiled') as typeof import('../../module.compiled')\n).vendored['contexts'].ServerInsertedHtml\n","'use client'\n\nimport React, { useEffect } from 'react';\nimport { usePathname } from 'next/navigation';\n\ninterface NonAuthLayoutProps {\n  children: React.ReactNode;\n}\n\nconst NonAuthLayout: React.FC<NonAuthLayoutProps> = ({ children }) => {\n  const pathname = usePathname();\n\n  useEffect(() => {\n    if (typeof document !== 'undefined') {\n      const capitalizeFirstLetter = (str: string): string => {\n        if (!str || str.length < 2) return str;\n        return str.charAt(1).toUpperCase() + str.slice(2);\n      };\n\n      const currentPage = capitalizeFirstLetter(pathname);\n      document.title = `${currentPage} | Book on Transapp`;\n    }\n  }, [pathname]);\n\n  return <React.Fragment>{children}</React.Fragment>;\n};\n\nexport default NonAuthLayout;\n","'use client'\n\nimport React, { useState } from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { useRouter } from \"next/navigation\";\nimport axios from \"axios\";\nimport Image from \"next/image\";\nimport logo from \"../../assets/images/transapp-logo.svg\";\nimport { toast } from \"react-hot-toast\";\nimport { useStateMachine } from \"little-state-machine\";\nimport { updateUser, updateClient } from \"../../utils/updateActions\";\nimport { useForm } from \"react-hook-form\";\nimport type { User } from \"../../interfaces/user.interface\";\n\ninterface FormProps {\n  account?: string;\n  buttonText: string;\n  buttonLink: string;\n  source?: string;\n  facebook?: string;\n  google?: string;\n}\n\ninterface FormData {\n  name?: string;\n  email: string;\n  password: string;\n}\n\nconst Form: React.FC<FormProps> = ({\n  account,\n  buttonText,\n  buttonLink,\n  source,\n}) => {\n  const { t } = useTranslation();\n  const router = useRouter();\n  \n  if (typeof document !== 'undefined') {\n    document.body.setAttribute('style', 'background: #f1f5f7!important;');\n  }\n  \n  const {\n    register,\n    handleSubmit,\n    formState: { errors },\n  } = useForm<FormData>();\n\n  const { actions } = useStateMachine({ updateUser, updateClient });\n  const [loading, setLoading] = useState<boolean>(false);\n  const [isPasswordVisible, setIsPasswordVisible] = useState<boolean>(false);\n\n  const togglePassword = (): void => {\n    setIsPasswordVisible(!isPasswordVisible);\n  };\n\n  const onSubmitSignup = async (formData: FormData): Promise<void> => {\n    try {\n      setLoading(true);\n      \n      if (!formData.password || formData.password.length < 6) {\n        toast.error('Password must be at least 6 characters');\n        setLoading(false);\n        return;\n      }\n\n      const { data } = await axios.post<{ error: boolean; message: string; data?: User & { token?: string } }>(\"api/v1/users/signup\", {\n        email: formData.email,\n        password: formData.password,\n        name: formData.name,\n      });\n      \n      if (data.error) {\n        toast.error(data.message || 'Signup failed');\n        setLoading(false);\n      } else {\n        toast.success(data.message || 'Account created successfully. Please check your email to verify your account.');\n        router.push(\"/login\");\n      }\n    } catch (error: unknown) {\n      setLoading(false);\n      if (axios.isAxiosError(error)) {\n        toast.error(error.response?.data?.message || 'Signup failed');\n      } else {\n        toast.error('An unexpected error occurred');\n      }\n    }\n  };\n\n  const onSubmitLogin = async (formData: FormData): Promise<void> => {\n    try {\n      setLoading(true);\n      \n      if (!formData.password) {\n        toast.error('Password is required');\n        setLoading(false);\n        return;\n      }\n\n      const { data } = await axios.post<{ error: boolean; message: string; data?: User & { token?: string } }>(\"api/v1/users/login\", {\n        email: formData.email,\n        password: formData.password,\n      });\n      \n      if (data.error) {\n        toast.error(data.message || 'Login failed');\n        setLoading(false);\n      } else {\n        actions.updateUser({ data });\n        \n        if (typeof window !== 'undefined') {\n          localStorage.setItem(\"authClient\", JSON.stringify(data));\n        }\n\n        toast.success(data.message || 'Login successful');\n        router.push(\"/\");\n      }\n    } catch (error: unknown) {\n      setLoading(false);\n      if (axios.isAxiosError(error)) {\n        toast.error(error.response?.data?.message || 'Login failed');\n      } else {\n        toast.error('An unexpected error occurred');\n      }\n    }\n  };\n\n  return (\n    <div\n      className=\"min-vh-100 d-flex flex-column opacity-mask\"\n      data-opacity-mask=\"rgba(0, 0, 0, 0.05)\"\n    >\n      <div className=\"container my-auto\">\n        <div className=\"row\">\n          <div className=\"col-md-9 col-lg-7 col-xl-5 mx-auto my-4\">\n            <div className=\"panel header_2 center\">\n              <figure>\n                <a href=\"#0\">\n                  <Image src={logo} width={86} height={80} alt=\"TransApp Logo\" />\n                </a>\n              </figure>\n\n              <form \n                className=\"input_style_1\" \n                onSubmit={source === 'login' ? handleSubmit(onSubmitLogin) : handleSubmit(onSubmitSignup)}\n              >\n                {source === 'login' ? null : (\n                  <div className=\"form-group\">\n                    <label htmlFor=\"name\">{t(\"name\")}</label>\n                    <input\n                      type=\"text\"\n                      name=\"name\"\n                      id=\"name\"\n                      className=\"form-control\"\n                      {...register(\"name\", {\n                        required: true,\n                      })}\n                    />\n                  </div>\n                )}\n                {errors.name && (\n                  <p style={{ color: \"red\" }}>{t(\"agency_name_err\")}</p>\n                )}\n                <div className=\"form-group\">\n                  <label htmlFor=\"email_address\">{t(\"email_address\")}</label>\n                  <input\n                    type=\"email\"\n                    name=\"email_address\"\n                    id=\"email_address\"\n                    className=\"form-control\"\n                    {...register(\"email\", {\n                      required: true,\n                      pattern:\n                        /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/,\n                    })}\n                  />\n                </div>\n                {errors.email && (\n                  <p style={{ color: \"red\" }}>{t(\"email_err\")}</p>\n                )}\n                <label htmlFor=\"password\">{t(\"password\")}</label>\n                <div className=\"row\">\n                  <div className=\"input-group mb-3 col-lg-12\">\n                    <input\n                      type={isPasswordVisible ? \"text\" : \"password\"}\n                      name=\"password\"\n                      id=\"password\"\n                      className=\"form-control\"\n                      {...register(\"password\", {\n                        required: true,\n                        minLength: 6,\n                      })}\n                    />\n                    <div className=\"input-group-prepend bg-white\">\n                      <span \n                        className=\"input-group-text border-left-0 rounded-right bg-white\" \n                        id=\"basic-addon1\"\n                      >\n                        <i \n                          className={isPasswordVisible ? \"fas fa-eye\" : \"fas fa-eye-slash\"} \n                          onClick={togglePassword}\n                          style={{ cursor: 'pointer' }}\n                        />\n                      </span>\n                    </div>\n                  </div>\n                </div>\n\n                {errors.password && (\n                  <p style={{ color: \"red\" }}>{t(\"password_err\")}</p>\n                )}\n\n                {buttonLink !== '/login' && (\n                  <p className=\"float-right mb-3\">\n                    <a href=\"/user-forgot\">{t(\"forgot_password\")}?</a>\n                  </p>\n                )}\n\n                <button type=\"submit\" className=\"btn_1 full-width\" disabled={loading}>\n                  {loading ? t(\"loading\") || \"Loading...\" : buttonText}\n                </button>\n              </form>\n              {source === 'triplogin' ? null : source === \"login\" ? (\n                <p className=\"text-center mt-3 mb-0\">\n                  {account} <a href=\"/register\">{t(\"sign_up\")}</a>\n                </p>\n              ) : (\n                <p className=\"text-center mt-3 mb-0\">\n                  {account} <a href=\"/login\">{t(\"login\")}</a>\n                </p>\n              )}\n              {source === 'triplogin' && (\n                <div>\n                  <div className=\"divider mt-4\">\n                    <span>{t(\"or\")}</span>\n                  </div>\n                  <p className=\"text-center\">\n                    No online account? <a href=\"/ticket-form\">{t(\"guest_checkout\")}</a>\n                  </p>\n                </div>\n              )}\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Form;\n","'use client'\n\nimport React from 'react';\nimport NonAuthLayout from '../../components/NonAuthLayout';\nimport TripLogin from '../../pages/Users/TripLogin';\n\nexport default function TripLoginPage() {\n  return (\n    <NonAuthLayout>\n      <TripLogin />\n    </NonAuthLayout>\n  );\n}\n","'use client'\n\nimport React from 'react';\nimport Form from '../../components/Common/Form';\nimport { useTranslation } from 'react-i18next';\n\nconst TripLogin: React.FC = () => {\n  const { t } = useTranslation();\n\n  return (\n    <section className=\"\">\n      <Form\n        buttonLink=\"/guest-checkout\"\n        buttonText={t(\"login\")}\n        account={t(\"guest_checkout\")}\n        source=\"triplogin\"\n        facebook={t(\"facebook_login\")}\n        google={t(\"google_login\")}\n      />\n    </section>\n  );\n};\n\nexport default TripLogin;\n"],"names":["module","exports","require","vendored","AppRouterContext","HooksClientContext","ServerInsertedHtml"],"mappings":"gnBAAAA,EAAOC,OAAO,CACZC,EAAQ,CAAA,CAAA,IAAA,GACRC,QAAQ,CAAC,QAAW,CAACC,gBAAgB,8BCFvCJ,GAAOC,OAAO,CACZC,EAAQ,CAAA,CAAA,IAAA,GACRC,QAAQ,CAAC,QAAW,CAACE,kBAAkB,+BCFzCL,EAAOC,OAAO,CACZC,EAAQ,CAAA,CAAA,IAAA,GACRC,QAAQ,CAAC,QAAW,CAACG,kBAAkB,0CCAzC,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,wBAMoD,CAAC,UAAE,CAAQ,CAAE,IAC/D,IAAM,EAAW,CAAA,EAAA,EAAA,WAAA,AAAW,IAc5B,MAZA,CAAA,EAAA,EAAA,SAAA,AAAS,EAAC,KACR,GAAI,AAAoB,oBAAb,SAA0B,CAMnC,IAAM,EAJJ,AAAI,CAAC,IAAO,EAAI,KAIE,CAJI,EAAG,EAClB,CADqB,CACjB,MADwB,AAClB,CAAC,GAAG,WAAW,GAAK,EAAI,KAAK,CAAC,GAGP,EAC1C,SAAS,KAAK,CAAG,CAAA,EAAG,EAAY,mBAAmB,CAAC,AACtD,CACF,EAAG,CAAC,EAAS,EAEN,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAK,CAAC,QAAQ,CAAA,UAAE,GAC1B,6CCvBA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,CAAA,CAAA,MAAA,IAAA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,MACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,EAAA,CAAA,CAAA,wBAkBkC,CAAC,SACjC,CAAO,YACP,CAAU,YACV,CAAU,QACV,CAAM,CACP,IACC,GAAM,GAAE,CAAC,CAAE,CAAG,CAAA,EAAA,EAAA,cAAA,AAAc,IACtB,EAAS,CAAA,EAAA,EAAA,SAAA,AAAS,IAEA,aAApB,AAAiC,OAA1B,UACT,SAAS,IAAI,CAAC,YAAY,CAAC,QAAS,kCAGtC,GAAM,UACJ,CAAQ,CACR,cAAY,CACZ,UAAW,QAAE,CAAM,CAAE,CACtB,CAAG,CAAA,EAAA,EAAA,OAAA,AAAO,IAEL,SAAE,CAAO,CAAE,CAAG,CAAA,EAAA,EAAA,eAAA,AAAe,EAAC,CAAE,WAAA,EAAA,UAAU,CAAE,aAAA,EAAA,YAAY,AAAC,GACzD,CAAC,EAAS,EAAW,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAU,GAC1C,CAAC,EAAmB,EAAqB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,GAAU,GAM9D,EAAiB,MAAO,IAC5B,GAAI,CAGF,GAFA,GAAW,GAEP,CAAC,EAAS,QAAQ,EAAI,EAAS,QAAQ,CAAC,MAAM,CAAG,EAAG,CACtD,EAAA,KAAK,CAAC,KAAK,CAAC,0CACZ,GAAW,GACX,MACF,CAEA,GAAM,MAAE,CAAI,CAAE,CAAG,MAAM,EAAA,OAAK,CAAC,IAAI,CAAwE,sBAAuB,CAC9H,MAAO,EAAS,KAAK,CACrB,SAAU,EAAS,QAAQ,CAC3B,KAAM,EAAS,IACjB,AADqB,GAGjB,EAAK,KAAK,EAAE,AACd,EAAA,KAAK,CAAC,KAAK,CAAC,EAAK,OAAO,EAAI,iBAC5B,GAAW,KAEX,EAAA,KAAK,CAAC,OAAO,CAAC,EAAK,OAAO,EAAI,iFAC9B,EAAO,IAAI,CAAC,UAEhB,CAAE,MAAO,EAAgB,CACvB,GAAW,GACP,EAAA,OAAK,CAAC,YAAY,CAAC,GACrB,EAAA,GAD6B,EACxB,CAAC,KAAK,CAAC,EAAM,QAAQ,EAAE,MAAM,SAAW,iBAE7C,EAAA,KAAK,CAAC,KAAK,CAAC,+BAEhB,CACF,EAEM,EAAgB,MAAO,IAC3B,GAAI,CAGF,GAFA,GAAW,GAEP,CAAC,EAAS,QAAQ,CAAE,CACtB,EAAA,KAAK,CAAC,KAAK,CAAC,wBACZ,GAAW,GACX,MACF,CAEA,GAAM,CAAE,MAAI,CAAE,CAAG,MAAM,EAAA,OAAK,CAAC,IAAI,CAAwE,qBAAsB,CAC7H,MAAO,EAAS,KAAK,CACrB,SAAU,EAAS,QAAQ,AAC7B,GAEI,EAAK,KAAK,EAAE,AACd,EAAA,KAAK,CAAC,KAAK,CAAC,EAAK,OAAO,EAAI,gBAC5B,GAAW,KAEX,EAAQ,UAAU,CAAC,MAAE,CAAK,GAM1B,EAAA,KAAK,CAAC,OAAO,CAAC,EAAK,OAAO,EAAI,oBAC9B,EAAO,IAAI,CAAC,KAEhB,CAAE,MAAO,EAAgB,CACvB,GAAW,GACP,EAAA,OAAK,CAAC,YAAY,CAAC,GACrB,EAAA,GAD6B,EACxB,CAAC,KAAK,CAAC,EAAM,QAAQ,EAAE,MAAM,SAAW,gBAE7C,EAAA,KAAK,CAAC,KAAK,CAAC,+BAEhB,CACF,EAEA,MACE,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CACC,UAAU,6CACV,oBAAkB,+BAElB,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,6BACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,eACb,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,mDACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,kCACb,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,UACC,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,KAAK,cACN,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAK,CAAA,CAAC,IAAK,EAAA,OAAI,CAAE,MAAO,GAAI,OAAQ,GAAI,IAAI,sBAIjD,CAAA,EAAA,EAAA,IAAA,EAAC,OAAA,CACC,UAAU,gBACV,QAAA,CAA+B,EAArB,AAAW,YAAuB,EAA8B,aAE9D,EAFiD,QAE5D,EAAqB,KACpB,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,uBACb,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CAAM,QAAQ,gBAAQ,EAAE,UACzB,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CACC,KAAK,OACL,KAAK,OACL,GAAG,OACH,UAAU,eACT,GAAG,EAAS,OAAQ,CACnB,SAAU,EACZ,EAAE,MAIP,EAAO,IAAI,EACV,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,MAAO,CAAE,MAAO,KAAM,WAAI,EAAE,qBAEjC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,uBACb,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CAAM,QAAQ,yBAAiB,EAAE,mBAClC,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CACC,KAAK,QACL,KAAK,gBACL,GAAG,gBACH,UAAU,eACT,GAAG,EAAS,QAAS,CACpB,SAAU,GACV,QACE,uJACJ,EAAE,MAGL,EAAO,KAAK,EACX,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,MAAO,CAAE,MAAO,KAAM,WAAI,EAAE,eAEjC,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CAAM,QAAQ,oBAAY,EAAE,cAC7B,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,eACb,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,uCACb,CAAA,EAAA,EAAA,GAAA,EAAC,QAAA,CACC,KAAM,EAAoB,OAAS,WACnC,KAAK,WACL,GAAG,WACH,UAAU,eACT,GAAG,EAAS,WAAY,CACvB,UAAU,EACV,UAAW,CACb,EAAE,GAEJ,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,wCACb,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CACC,UAAU,wDACV,GAAG,wBAEH,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CACC,UAAW,EAAoB,aAAe,mBAC9C,QApJD,CAoJU,IAnJ/B,EAAqB,CAAC,EACxB,EAmJwB,MAAO,CAAE,OAAQ,SAAU,aAOpC,EAAO,QAAQ,EACd,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,MAAO,CAAE,MAAO,KAAM,WAAI,EAAE,kBAGjB,WAAf,GACC,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,4BACX,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,CAAE,KAAK,yBAAgB,EAAE,mBAAmB,SAIjD,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CAAO,KAAK,SAAS,UAAU,mBAAmB,SAAU,WAC1D,EAAU,EAAE,YAAc,aAAe,OAGlC,cAAX,EAAyB,KAAkB,UAAX,EAC/B,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,CAAE,UAAU,kCACV,EAAQ,IAAC,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,KAAK,qBAAa,EAAE,gBAGnC,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,CAAE,UAAU,kCACV,EAAQ,IAAC,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,KAAK,kBAAU,EAAE,cAGtB,cAAX,GACC,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACC,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,wBACb,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,UAAM,EAAE,UAEX,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,CAAE,UAAU,wBAAc,sBACN,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,KAAK,wBAAgB,EAAE,oCAUjE,6CCpPA,EAAA,EAAA,CAAA,CAAA,OCAA,EAAA,EAAA,CAAA,CAAA,OACA,EAAA,CAAA,CAAA,MAAA,IAAA,EAAA,EAAA,CAAA,CAAA,aAE4B,KAC1B,GAAM,GAAE,CAAC,CAAE,CAAG,CAAA,EAAA,EAAA,YAgBD,EAhBC,AAAc,IAE5B,MACE,CAAA,EAAA,EAAA,GAAA,EAAC,UAAA,CAAQ,UAAU,YACjB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAI,CAAA,CACH,WAAW,kBACX,WAAY,EAAE,SACd,QAAS,EAAE,kBACX,OAAO,YACP,SAAU,EAAE,kBACZ,OAAQ,EAAE,mBAIlB,EDfe,SAAS,IACtB,MACE,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,OAAa,CAAA,UACZ,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CAAA,IAGP","ignoreList":[0,1,2]}