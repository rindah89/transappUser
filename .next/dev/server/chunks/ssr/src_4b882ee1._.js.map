{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 7, "column": 0}, "map": {"version":3,"sources":["file:///Users/remyngwanyam/Desktop/transapp/transapp-user-master/src/assets/images/transapp-logo.svg.mjs%20%28structured%20image%20object%20with%20data%20url%29"],"sourcesContent":["import src from \"IMAGE\";\nexport default { src, width: 113, height: 48, blurWidth: 0, blurHeight: 0};\n"],"names":[],"mappings":";;;;AAAA;;uCACe;IAAE,KAAA,gKAAG;IAAE,OAAO;IAAK,QAAQ;IAAI,WAAW;IAAG,YAAY;AAAC"}},
    {"offset": {"line": 24, "column": 0}, "map": {"version":3,"sources":["file:///Users/remyngwanyam/Desktop/transapp/transapp-user-master/src/components/Common/Form.tsx"],"sourcesContent":["'use client'\n\nimport React, { useMemo, useState } from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport { useRouter, useSearchParams } from \"next/navigation\";\nimport axios from \"axios\";\nimport Image from \"next/image\";\nimport logo from \"../../assets/images/transapp-logo.svg\";\nimport { toast } from \"react-hot-toast\";\nimport { useStateMachine } from \"little-state-machine\";\nimport { updateUser, updateClient } from \"../../utils/updateActions\";\nimport { useForm } from \"react-hook-form\";\nimport type { User } from \"../../interfaces/user.interface\";\nimport { Eye, EyeOff } from \"lucide-react\";\n\ninterface FormProps {\n  account?: string;\n  buttonText: string;\n  buttonLink: string;\n  source?: string;\n  facebook?: string;\n  google?: string;\n}\n\ninterface FormData {\n  name?: string;\n  email: string;\n  password: string;\n}\n\nconst Form: React.FC<FormProps> = ({\n  account,\n  buttonText,\n  buttonLink,\n  source,\n}) => {\n  const { t } = useTranslation();\n  const router = useRouter();\n  const searchParams = useSearchParams();\n  \n  if (typeof document !== 'undefined') {\n    document.body.setAttribute('style', 'background: #f1f5f7!important;');\n  }\n\n  const redirectTo = useMemo(() => {\n    const raw = searchParams?.get('redirect');\n    if (!raw) return undefined;\n    // Prevent open redirects: only allow same-origin absolute paths.\n    if (!raw.startsWith('/') || raw.startsWith('//')) return undefined;\n    return raw;\n  }, [searchParams]);\n  \n  const {\n    register,\n    handleSubmit,\n    formState: { errors },\n  } = useForm<FormData>();\n\n  const { actions } = useStateMachine({ updateUser, updateClient });\n  const [loading, setLoading] = useState<boolean>(false);\n  const [isPasswordVisible, setIsPasswordVisible] = useState<boolean>(false);\n\n  const togglePassword = (): void => {\n    setIsPasswordVisible(!isPasswordVisible);\n  };\n\n  const onSubmitSignup = async (formData: FormData): Promise<void> => {\n    const toastId = toast.loading('Creating account...');\n    try {\n      setLoading(true);\n      \n      if (!formData.password || formData.password.length < 6) {\n        toast.error('Password must be at least 6 characters', { id: toastId });\n        return;\n      }\n\n      const { data } = await axios.post<{ error: boolean; message: string; data?: User & { token?: string } }>(\"api/v1/users/signup\", {\n        email: formData.email,\n        password: formData.password,\n        name: formData.name,\n      });\n      \n      if (data.error) {\n        toast.error(data.message || 'Signup failed', { id: toastId });\n      } else {\n        const nextUser = data.data;\n        const token = nextUser?.token || '';\n\n        if (!nextUser || !token) {\n          // Extremely defensive fallback: if session couldn't be created, ask user to login\n          toast.success((data.message || 'Account created successfully.') + ' Please login to continue.', { id: toastId });\n          router.push(\"/login?redirect=%2Fbook\");\n          return;\n        }\n\n        actions.updateUser({ data: nextUser });\n        if (typeof window !== 'undefined') {\n          localStorage.setItem(\"authClient\", JSON.stringify({ user: nextUser, token }));\n        }\n\n        toast.success(data.message || 'Account created successfully.', { id: toastId });\n        router.push(\"/book\");\n      }\n    } catch (error: unknown) {\n      if (axios.isAxiosError(error)) {\n        toast.error(error.response?.data?.message || 'Signup failed', { id: toastId });\n      } else {\n        toast.error('An unexpected error occurred', { id: toastId });\n      }\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const onSubmitLogin = async (formData: FormData): Promise<void> => {\n    const toastId = toast.loading('Signing in...');\n    try {\n      setLoading(true);\n      \n      if (!formData.password) {\n        toast.error('Password is required', { id: toastId });\n        return;\n      }\n\n      const { data } = await axios.post<{ error: boolean; message: string; data?: User & { token?: string } }>(\"api/v1/users/login\", {\n        email: formData.email,\n        password: formData.password,\n      });\n      \n      if (data.error) {\n        toast.error(data.message || 'Login failed', { id: toastId });\n      } else {\n        actions.updateUser({ data: data.data });\n\n        if (typeof window !== 'undefined') {\n          localStorage.setItem(\n            \"authClient\",\n            JSON.stringify({ user: data.data, token: data.data?.token || \"\" })\n          );\n        }\n\n        toast.success(data.message || 'Login successful', { id: toastId });\n        router.push(redirectTo || \"/\");\n      }\n    } catch (error: unknown) {\n      if (axios.isAxiosError(error)) {\n        toast.error(error.response?.data?.message || 'Login failed', { id: toastId });\n      } else {\n        toast.error('An unexpected error occurred', { id: toastId });\n      }\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  return (\n    <div\n      className=\"min-vh-100 d-flex flex-column opacity-mask\"\n      data-opacity-mask=\"rgba(0, 0, 0, 0.05)\"\n    >\n      <div className=\"container my-auto\">\n        <div className=\"row\">\n          <div className=\"col-md-9 col-lg-7 col-xl-5 mx-auto my-4\">\n            <div className=\"panel header_2 center\">\n              <figure>\n                <a href=\"#0\">\n                  <Image src={logo} width={86} height={80} alt=\"TransApp Logo\" />\n                </a>\n              </figure>\n\n              <form \n                className=\"input_style_1\" \n                onSubmit={source === 'login' ? handleSubmit(onSubmitLogin) : handleSubmit(onSubmitSignup)}\n              >\n                {source === 'login' ? null : (\n                  <div className=\"form-group\">\n                    <label htmlFor=\"name\">{t(\"name\")}</label>\n                    <input\n                      type=\"text\"\n                      id=\"name\"\n                      className=\"form-control\"\n                      {...register(\"name\", {\n                        required: true,\n                      })}\n                    />\n                  </div>\n                )}\n                {errors.name && (\n                  <p style={{ color: \"red\" }}>{t(\"agency_name_err\")}</p>\n                )}\n                <div className=\"form-group\">\n                  <label htmlFor=\"email_address\">{t(\"email_address\")}</label>\n                  <input\n                    type=\"email\"\n                    id=\"email_address\"\n                    className=\"form-control\"\n                    {...register(\"email\", {\n                      required: true,\n                      pattern:\n                        /^(([^<>()[\\]\\\\.,;:\\s@\"]+(\\.[^<>()[\\]\\\\.,;:\\s@\"]+)*)|(\".+\"))@((\\[[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\.[0-9]{1,3}\\])|(([a-zA-Z\\-0-9]+\\.)+[a-zA-Z]{2,}))$/,\n                    })}\n                  />\n                </div>\n                {errors.email && (\n                  <p style={{ color: \"red\" }}>{t(\"email_err\")}</p>\n                )}\n                <label htmlFor=\"password\">{t(\"password\")}</label>\n                <div className=\"row\">\n                  <div className=\"input-group mb-3 col-lg-12\">\n                    <input\n                      type={isPasswordVisible ? \"text\" : \"password\"}\n                      id=\"password\"\n                      className=\"form-control\"\n                      {...register(\"password\", {\n                        required: true,\n                        minLength: 6,\n                      })}\n                    />\n                    <div className=\"input-group-prepend bg-white\">\n                      <span \n                        className=\"input-group-text border-left-0 rounded-right bg-white\" \n                        id=\"basic-addon1\"\n                      >\n                        {isPasswordVisible ? (\n                          <Eye\n                            onClick={togglePassword}\n                            style={{ cursor: 'pointer' }}\n                            size={18}\n                          />\n                        ) : (\n                          <EyeOff\n                            onClick={togglePassword}\n                            style={{ cursor: 'pointer' }}\n                            size={18}\n                          />\n                        )}\n                      </span>\n                    </div>\n                  </div>\n                </div>\n\n                {errors.password && (\n                  <p style={{ color: \"red\" }}>{t(\"password_err\")}</p>\n                )}\n\n                {buttonLink !== '/login' && (\n                  <p className=\"float-right mb-3\">\n                    <a href=\"/user-forgot\">{t(\"forgot_password\")}?</a>\n                  </p>\n                )}\n\n                <button type=\"submit\" className=\"btn_1 full-width\" disabled={loading}>\n                  {loading ? t(\"loading\") || \"Loading...\" : buttonText}\n                </button>\n              </form>\n              {source === 'triplogin' ? null : source === \"login\" ? (\n                <p className=\"text-center mt-3 mb-0\">\n                  {account} <a href=\"/register\">{t(\"sign_up\")}</a>\n                </p>\n              ) : (\n                <p className=\"text-center mt-3 mb-0\">\n                  {account} <a href=\"/login\">{t(\"login\")}</a>\n                </p>\n              )}\n              {source === 'triplogin' && (\n                <div>\n                  <div className=\"divider mt-4\">\n                    <span>{t(\"or\")}</span>\n                  </div>\n                  <p className=\"text-center\">\n                    No online account? <a href=\"/ticket-form\">{t(\"guest_checkout\")}</a>\n                  </p>\n                </div>\n              )}\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default Form;\n"],"names":[],"mappings":"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"}},
    {"offset": {"line": 522, "column": 0}, "map": {"version":3,"sources":["file:///Users/remyngwanyam/Desktop/transapp/transapp-user-master/src/pages/Users/Login.tsx"],"sourcesContent":["'use client'\n\nimport React from \"react\";\nimport { useTranslation } from \"react-i18next\";\nimport Form from \"../../components/Common/Form\";\n\nconst Login: React.FC = () => {\n  const { t } = useTranslation();\n\n  return (\n    <section className=\"mt-5\">\n      <Form\n        buttonLink=\"/register\"\n        buttonText={t(\"login\")}\n        account={t(\"no_account_yet\")}\n        source=\"login\"\n        facebook={t(\"facebook_login\")}\n        google={t(\"google_login\")}\n      />\n    </section>\n  );\n};\n\nexport default Login;\n"],"names":[],"mappings":";;;;;AAGA;AAAA;AACA;AAJA;;;;AAMA,MAAM,QAAkB;IACtB,MAAM,EAAE,CAAC,EAAE,GAAG,IAAA,kLAAc;IAE5B,qBACE,8OAAC;QAAQ,WAAU;kBACjB,cAAA,8OAAC,+IAAI;YACH,YAAW;YACX,YAAY,EAAE;YACd,SAAS,EAAE;YACX,QAAO;YACP,UAAU,EAAE;YACZ,QAAQ,EAAE;;;;;;;;;;;AAIlB;uCAEe"}}]
}