(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,749152,(e,t,r)=>{"use strict";r._=function(e,t){if(null==e)return{};var r,n,a={},l=Object.keys(e);for(n=0;n<l.length;n++)r=l[n],t.indexOf(r)>=0||(a[r]=e[r]);return a}},95692,(e,t,r)=>{"use strict";var n=e.r(749152);r._=function(e,t){if(null==e)return{};var r,a,l=n._(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)r=i[a],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(l[r]=e[r])}return l}},307573,901381,e=>{"use strict";var t=e.i(843476),r=e.i(500932),n=e.i(271645);let a=(0,n.createContext)(void 0);function l(e){let l,i,o,u,s=(0,r.c)(7),{children:c,initialState:d}=e;s[0]!==d?(l=null!=d?d:{},s[0]=d,s[1]=l):l=s[1];let[f,_]=(0,n.useState)(l);return s[2]!==f?(o={state:f,setState:_},s[2]=f,s[3]=o):o=s[3],i=o,s[4]!==c||s[5]!==i?(u=(0,t.jsx)(a.Provider,{value:i,children:c}),s[4]=c,s[5]=i,s[6]=u):u=s[6],u}function i(e){let t,l,i=(0,r.c)(7),o=(0,n.useContext)(a);if(!o)throw Error("useStateMachine must be used within a StateMachineProvider");let{state:u,setState:s}=o;e:{let r;if(i[0]!==e||i[1]!==s){if(r={},!e){t=r;break e}for(let[t,n]of Object.entries(e))r[t]=e=>{s(t=>n(t,e))};i[0]=e,i[1]=s,i[2]=r,i[3]=t}else r=i[2],t=i[3];t=r}let c=t;return i[4]!==c||i[5]!==u?(l={state:u,actions:c},i[4]=c,i[5]=u,i[6]=l):l=i[6],l}e.s(["StateMachineProvider",()=>l,"useStateMachine",()=>i],307573);var o=e.i(120786),u=e.i(92808);e.s(["updateAction",0,(e,t)=>(0,o._)({},e,t),"updateBooking",0,(e,t)=>(0,u._)((0,o._)({},e),{booking:t}),"updateClient",0,(e,t)=>(0,o._)({},e,t),"updateSearch",0,(e,t)=>(0,u._)((0,o._)({},e),{search:t}),"updateUser",0,(e,t)=>(0,u._)((0,o._)({},e),{user:t})],901381)},808341,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0});var n={cancelIdleCallback:function(){return i},requestIdleCallback:function(){return l}};for(var a in n)Object.defineProperty(r,a,{enumerable:!0,get:n[a]});let l="undefined"!=typeof self&&self.requestIdleCallback&&self.requestIdleCallback.bind(window)||function(e){let t=Date.now();return self.setTimeout(function(){e({didTimeout:!1,timeRemaining:function(){return Math.max(0,50-(Date.now()-t))}})},1)},i="undefined"!=typeof self&&self.cancelIdleCallback&&self.cancelIdleCallback.bind(window)||function(e){return clearTimeout(e)};("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},479520,(e,t,r)=>{"use strict";var n=e.r(344086),a=e.r(204571),l=e.r(95692);Object.defineProperty(r,"__esModule",{value:!0});var i={default:function(){return m},handleClientScriptLoad:function(){return g},initScriptLoader:function(){return b}};for(var o in i)Object.defineProperty(r,o,{enumerable:!0,get:i[o]});let u=e.r(555682),s=e.r(190809),c=e.r(843476),d=u._(e.r(174080)),f=s._(e.r(271645)),_=e.r(742732),p=e.r(922737),h=e.r(808341),y=new Map,v=new Set,O=e=>{let{src:t,id:r,onLoad:n=()=>{},onReady:a=null,dangerouslySetInnerHTML:l,children:i="",strategy:o="afterInteractive",onError:u,stylesheets:s}=e,c=r||t;if(c&&v.has(c))return;if(y.has(t)){v.add(c),y.get(t).then(n,u);return}let f=()=>{a&&a(),v.add(c)},_=document.createElement("script"),h=new Promise((e,t)=>{_.addEventListener("load",function(t){e(),n&&n.call(this,t),f()}),_.addEventListener("error",function(e){t(e)})}).catch(function(e){u&&u(e)});l?(_.innerHTML=l.__html||"",f()):i?(_.textContent="string"==typeof i?i:Array.isArray(i)?i.join(""):"",f()):t&&(_.src=t,y.set(t,h)),(0,p.setAttributesFromProps)(_,e),"worker"===o&&_.setAttribute("type","text/partytown"),_.setAttribute("data-nscript",o),s&&(e=>{if(d.default.preinit)return e.forEach(e=>{d.default.preinit(e,{as:"style"})});if("undefined"!=typeof window){let t=document.head;e.forEach(e=>{let r=document.createElement("link");r.type="text/css",r.rel="stylesheet",r.href=e,t.appendChild(r)})}})(s),document.body.appendChild(_)};function g(e){let{strategy:t="afterInteractive"}=e;"lazyOnload"===t?window.addEventListener("load",()=>{(0,h.requestIdleCallback)(()=>O(e))}):O(e)}function b(e){e.forEach(g),[...document.querySelectorAll('[data-nscript="beforeInteractive"]'),...document.querySelectorAll('[data-nscript="beforePageRender"]')].forEach(e=>{let t=e.id||e.getAttribute("src");v.add(t)})}function S(e){let{id:t,src:r="",onLoad:i=()=>{},onReady:o=null,strategy:u="afterInteractive",onError:s,stylesheets:p}=e,y=l._(e,["id","src","onLoad","onReady","strategy","onError","stylesheets"]),{updateScripts:g,scripts:b,getIsSsr:S,appDir:m,nonce:k}=(0,f.useContext)(_.HeadManagerContext);k=y.nonce||k;let w=(0,f.useRef)(!1);(0,f.useEffect)(()=>{let e=t||r;w.current||(o&&e&&v.has(e)&&o(),w.current=!0)},[o,t,r]);let C=(0,f.useRef)(!1);if((0,f.useEffect)(()=>{if(!C.current){if("afterInteractive"===u)O(e);else"lazyOnload"===u&&("complete"===document.readyState?(0,h.requestIdleCallback)(()=>O(e)):window.addEventListener("load",()=>{(0,h.requestIdleCallback)(()=>O(e))}));C.current=!0}},[e,u]),("beforeInteractive"===u||"worker"===u)&&(g?(b[u]=(b[u]||[]).concat([a._(n._({id:t,src:r,onLoad:i,onReady:o,onError:s},y),{nonce:k})]),g(b)):S&&S()?v.add(t||r):S&&!S()&&O(a._(n._({},e),{nonce:k}))),m){if(p&&p.forEach(e=>{d.default.preinit(e,{as:"style"})}),"beforeInteractive"===u)if(!r)return y.dangerouslySetInnerHTML&&(y.children=y.dangerouslySetInnerHTML.__html,delete y.dangerouslySetInnerHTML),(0,c.jsx)("script",{nonce:k,dangerouslySetInnerHTML:{__html:"(self.__next_s=self.__next_s||[]).push(".concat(JSON.stringify([0,a._(n._({},y),{id:t})]),")")}});else return d.default.preload(r,y.integrity?{as:"script",integrity:y.integrity,nonce:k,crossOrigin:y.crossOrigin}:{as:"script",nonce:k,crossOrigin:y.crossOrigin}),(0,c.jsx)("script",{nonce:k,dangerouslySetInnerHTML:{__html:"(self.__next_s=self.__next_s||[]).push(".concat(JSON.stringify([r,a._(n._({},y),{id:t})]),")")}});"afterInteractive"===u&&r&&d.default.preload(r,y.integrity?{as:"script",integrity:y.integrity,nonce:k,crossOrigin:y.crossOrigin}:{as:"script",nonce:k,crossOrigin:y.crossOrigin})}return null}Object.defineProperty(S,"__nextScript",{value:!0});let m=S;("function"==typeof r.default||"object"==typeof r.default&&null!==r.default)&&void 0===r.default.__esModule&&(Object.defineProperty(r.default,"__esModule",{value:!0}),Object.assign(r.default,r),t.exports=r.default)},544636,e=>{"use strict";var t=e.i(247167),r=e.i(843476),n=e.i(500932),a=e.i(705766),l=e.i(307573),i=e.i(120786),o=e.i(92808),u=e.i(271645),s=e.i(581949),c=e.i(901381),d=e.i(107471);let f=(0,u.createContext)(void 0),_=e=>{var n,a;let{children:_}=e,{state:p,actions:h}=(0,l.useStateMachine)({updateUser:c.updateUser}),[y,v]=(0,u.useState)({user:null,token:""}),[O,g]=(0,u.useState)(!0),b=(0,u.useRef)("");return(0,u.useEffect)(()=>{b.current=y.token||""},[y.token]),(0,u.useEffect)(()=>{let e=t.default.env.NEXT_PUBLIC_API_URL;s.default.defaults.baseURL=e||"";let r=s.default.interceptors.request.use(e=>{let t=b.current;if(t)return e.headers.Authorization="Bearer ".concat(t),e;try{var r,n,a,l,i;let t=localStorage.getItem("authClient");if(t){let r=JSON.parse(t),n=(null==r?void 0:r.token)||(null==r||null==(a=r.data)?void 0:a.token)||(null==(i=p.user)||null==(l=i.data)?void 0:l.token);n&&(e.headers.Authorization="Bearer ".concat(n))}else(null==(n=p.user)||null==(r=n.data)?void 0:r.token)&&(e.headers.Authorization="Bearer ".concat(p.user.data.token))}catch(e){}return e},e=>Promise.reject(e));return()=>{s.default.interceptors.request.eject(r)}},[null==(a=p.user)||null==(n=a.data)?void 0:n.token]),(0,u.useEffect)(()=>{(async()=>{let e=()=>{let e=localStorage.getItem("authClient");if(e)try{var t;let r=JSON.parse(e),n=(null==r?void 0:r.token)||(null==r||null==(t=r.data)?void 0:t.token)||"",a=(null==r?void 0:r.user)||(null==r?void 0:r.data)||null;a&&n?(v({user:a,token:n}),b.current=n,h.updateUser({data:(0,o._)((0,i._)({},a),{token:n})})):v(r)}catch(e){}};try{if(!d.supabase)return void e();let{data:{session:t},error:r}=await d.supabase.auth.getSession();if(t&&!r){let e=t.user.id;if(!e){let e=localStorage.getItem("authClient");if(e)try{let t=JSON.parse(e);v(t)}catch(e){}return}let{data:r,error:n}=await d.supabase.from("users").select("*").eq("auth_id",e).single();if(r&&!n){let e={user:r,token:t.access_token};v(e),b.current=t.access_token,h.updateUser({data:(0,o._)((0,i._)({},r),{token:t.access_token})}),localStorage.setItem("authClient",JSON.stringify(e))}}else e()}catch(e){console.error("Error initializing auth:",e)}finally{g(!1)}})();let e=d.supabase;if(!e)return;let{data:{subscription:t}}=e.auth.onAuthStateChange(async(t,r)=>{if(r){let t=r.user.id;if(!t)return;let{data:n}=await e.from("users").select("*").eq("auth_id",t).single();if(n){let e={user:n,token:r.access_token};v(e),b.current=r.access_token,h.updateUser({data:(0,o._)((0,i._)({},n),{token:r.access_token})}),localStorage.setItem("authClient",JSON.stringify(e))}}else{{let e=localStorage.getItem("authClient");if(e)try{var n;let t=JSON.parse(e),r=(null==t?void 0:t.token)||(null==t||null==(n=t.data)?void 0:n.token),a=(null==t?void 0:t.user)||(null==t?void 0:t.data);if(r&&a){v({user:a,token:r}),h.updateUser({data:(0,o._)((0,i._)({},a),{token:r})});return}}catch(e){}}v({user:null,token:""}),b.current="",h.updateUser({data:null}),localStorage.removeItem("authClient")}});return()=>{t.unsubscribe()}},[h]),(0,r.jsx)(f.Provider,{value:[y,v],children:O?(0,r.jsx)("div",{style:{display:"flex",justifyContent:"center",alignItems:"center",minHeight:"100vh"},children:(0,r.jsx)("p",{children:"Loading..."})}):_})};function p(e){let t,i,o=(0,n.c)(3),{children:u}=e;return o[0]===Symbol.for("react.memo_cache_sentinel")?(t=(0,r.jsx)(a.Toaster,{}),o[0]=t):t=o[0],o[1]!==u?(i=(0,r.jsx)(l.StateMachineProvider,{children:(0,r.jsxs)(_,{children:[t,u]})}),o[1]=u,o[2]=i):i=o[2],i}e.i(383627),function(){if("undefined"!=typeof window&&window.document){var e;let t;if("function"==(t=typeof(e=window.__REACT_DEVTOOLS_GLOBAL_HOOK__))||"object"===t&&e)for(let e in window.__REACT_DEVTOOLS_GLOBAL_HOOK__){if("renderers"===e){window.__REACT_DEVTOOLS_GLOBAL_HOOK__[e]=new Map;continue}window.__REACT_DEVTOOLS_GLOBAL_HOOK__[e]="function"==typeof window.__REACT_DEVTOOLS_GLOBAL_HOOK__[e]?Function.prototype:null}}}(),e.s(["default",()=>p],544636)}]);