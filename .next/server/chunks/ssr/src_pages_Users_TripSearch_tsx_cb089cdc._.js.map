{"version":3,"sources":["../../../../src/pages/Users/TripSearch.tsx","../../../../src/assets/images/client-2.png.mjs%20%28structured%20image%20object%20with%20data%20url%29","../../../../src/components/Modals/UserBookingModal.tsx"],"sourcesContent":["'use client'\n\nimport React, { useEffect, useState, useRef, useCallback } from 'react';\nimport { useStateMachine } from \"little-state-machine\";\nimport { updateSearch, updateAction, SearchState } from \"../../utils/updateActions\";\nimport { Card, Row, Col, CardBody, Container, Button, Modal, ModalHeader, ModalBody, ModalFooter } from \"reactstrap\";\nimport moment from \"moment\";\nimport axios from 'axios';\nimport { SpinnerCircular } from 'spinners-react';\nimport Image from 'next/image';\nimport logo from \"../../assets/images/client-2.png\";\nimport { useTranslation } from 'react-i18next';\nimport { toast } from 'react-hot-toast';\nimport UserBookingModal from '../../components/Modals/UserBookingModal';\nimport type { Trip } from '../../interfaces/trips.interface';\nimport Link from 'next/link';\nimport Search from '../../components/Common/Search';\nimport PopularRoutes from '../../components/Common/PopularRoutes';\nimport TripFiltersResponsive from '../../components/Trips/TripFiltersResponsive';\nimport { DEFAULT_TRIP_FILTERS, applyTripFilters, sortTrips, availableSeats } from '../../utils/tripFilters';\n\nconst TripSearch: React.FC = () => {\n  const { t } = useTranslation();\n  const [isVisible, setIsVisible] = useState<boolean>(false);\n  const [success, setSuccess] = useState<boolean>(false);\n  const [ticket, setTicket] = useState<string>('');\n  const [seat, setSeat] = useState<string | null>(null);\n  const { actions, state } = useStateMachine({ updateSearch, updateAction });\n\n  const [data, setData] = useState<Trip[]>([]);\n  const [loading, setLoading] = useState<boolean>(true);\n  const [errorMessage, setErrorMessage] = useState<string | null>(null);\n  const [filters, setFilters] = useState(DEFAULT_TRIP_FILTERS);\n  const tripRef = useRef<Trip | null>(null);\n  const [modal, setModal] = useState<{ modal_static: boolean }>({ modal_static: false });\n  const [modalSuccess, setModalSuccess] = useState<{ modal_static: boolean }>({ modal_static: false });\n  const [modalFailure, setModalFailure] = useState<{ modal_static: boolean }>({ modal_static: false });\n\n  const searchState = (state?.search as any) as SearchState;\n  // Backend stores `journey_date` as `YYYY-MM-DD` (see `public.trips.journey_date`), so query params\n  // must match that format or searches return 0 results.\n  const journeyDate =\n    typeof searchState?.journeyDate === 'string'\n      ? searchState.journeyDate\n      : searchState?.journeyDate\n        ? moment(searchState.journeyDate).format('YYYY-MM-DD')\n        : '';\n  const from = typeof searchState?.from === 'string' ? searchState.from : (searchState?.from as any)?.value || '';\n  const to = typeof searchState?.to === 'string' ? searchState.to : (searchState?.to as any)?.value || '';\n  // Backend stores `departure` as `HH:mm` (24h, no AM/PM)\n  const departureTime =\n    typeof searchState?.departureTime === 'string'\n      ? searchState.departureTime\n      : searchState?.departureTime\n        ? moment(searchState.departureTime).format('HH:mm')\n        : '';\n\n  const initialJourneyDate = searchState?.journeyDate ? moment(searchState.journeyDate).toDate() : undefined;\n  const initialDepartureTime = searchState?.departureTime\n    ? moment(searchState.departureTime, ['HH:mm', 'hh:mm A']).toDate()\n    : undefined;\n\n  function hideFailureModal(): void {\n    setIsVisible(false);\n    setModalFailure({ modal_static: false });\n  }\n\n  const showModal = (): void => {\n    setModal({ modal_static: true });\n  };\n\n  const hideSuccessModal = (): void => {\n    setSuccess(false);\n    setModalSuccess({ modal_static: false });\n    setTicket('');\n    setSeat(null);\n  };\n\n  const getCurrentTrip = (trip: Trip): void => {\n    tripRef.current = trip;\n    actions.updateAction({ trip: tripRef.current });\n    showModal();\n  };\n\n  const fetchTrips = useCallback(async (): Promise<void> => {\n    try {\n      setErrorMessage(null);\n      setLoading(true);\n      const { data } = await axios.get<{ error: boolean; message: string; data?: Trip[] }>(`api/v1/trips/trip-search`, {\n        params: { from, to, journeyDate, departureTime }\n      });\n      if (data?.error) {\n        setErrorMessage(data.message || 'Failed to fetch trips');\n        toast.error(data.message);\n      } else {\n        const trips = data.data ?? [];\n        setData(trips);\n      }\n    } catch (err: unknown) {\n      if (axios.isAxiosError(err)) {\n        const msg = err.response?.data?.message || err.message || 'Failed to fetch trips';\n        setErrorMessage(msg);\n        toast.error(msg);\n      } else {\n        setErrorMessage('An unexpected error occurred');\n        toast.error('An unexpected error occurred');\n      }\n    } finally {\n      setLoading(false);\n    }\n  }, [from, to, journeyDate, departureTime]);\n\n  useEffect(() => {\n    if (typeof document !== 'undefined') {\n      document.body.setAttribute('style', 'background: #f1f5f7!important;');\n    }\n    fetchTrips();\n  }, [fetchTrips]);\n\n  const filterNoSeatsAvailable = data.filter((trip: Trip) => {\n    return trip.reserved !== trip.seats;\n  });\n\n  const filteredTrips = sortTrips(applyTripFilters(filterNoSeatsAvailable, filters), filters.sort);\n  const hasResults = filterNoSeatsAvailable.length > 0;\n  const hasFilteredResults = filteredTrips.length > 0;\n\n  if (loading) {\n    return (\n      <React.Fragment>\n        <div className=\"page-content\">\n          <Container fluid className=\"\">\n            <div className=\"loader-outer\">\n              <div className=\"loader-inner\">\n                <SpinnerCircular color=\"#bcc014\" size={50} />\n              </div>\n            </div>\n          </Container>\n        </div>\n      </React.Fragment>\n    );\n  }\n\n  return (\n    <>\n      <section className=\"trip-search mb-5\">\n        <div className=\"container\">\n          {!loading && (errorMessage || !hasResults) && (\n            <div className=\"row pt-5 mb-4\">\n              <div className=\"col-lg-12\">\n                <Card>\n                  <CardBody>\n                    {errorMessage ? (\n                      <>\n                        <h4 className=\"mb-2\">{t('Failed')} / {t('error') || 'Error'}</h4>\n                        <p className=\"mb-3\">\n                          {errorMessage}\n                        </p>\n                      </>\n                    ) : (\n                      <>\n                        <h4 className=\"mb-2\">{t('no_bus') || 'No buses found'}</h4>\n                        <p className=\"mb-3\">\n                          {t('no_bus') || 'No buses were found for your search.'} {from && to ? (\n                            <>({from} → {to})</>\n                          ) : null}\n                        </p>\n                      </>\n                    )}\n                    <div className=\"d-flex gap-2 flex-wrap\">\n                      <Button color=\"primary\" onClick={() => fetchTrips()}>\n                        {t('retry') || 'Retry'}\n                      </Button>\n                    </div>\n\n                    <div className=\"mt-4\">\n                      <h6 className=\"mb-3\">{t('modify_search') || 'Modify search'}</h6>\n                      <Search\n                        text=\"book\"\n                        initialFrom={from || undefined}\n                        initialTo={to || undefined}\n                        initialJourneyDate={initialJourneyDate}\n                        initialDepartureTime={initialDepartureTime}\n                      />\n                      <div className=\"mt-4\">\n                        <PopularRoutes />\n                      </div>\n                      <div className=\"mt-3\">\n                        <Link href=\"/book\" className=\"btn btn-outline-secondary\">\n                          {t('back') || 'Back'}\n                        </Link>\n                      </div>\n                    </div>\n                  </CardBody>\n                </Card>\n              </div>\n            </div>\n          )}\n\n          <div className=\"row pt-5 mb-4\">\n            <div className=\"col-lg-12\">\n              {hasResults ? (\n                <h6>\n                  {hasFilteredResults ? filteredTrips.length : 0} {t('buses')} {t('from')} {from} {t('to')} {to}\n                </h6>\n              ) : (\n                <h6>{filterNoSeatsAvailable.length} {t('no_bus')} {t('from')} {from} {t('to')} {to}</h6>\n              )}\n            </div>\n          </div>\n\n          {hasResults && (\n            <TripFiltersResponsive trips={filterNoSeatsAvailable} filters={filters} onChange={setFilters} />\n          )}\n\n          <div className=\"row\">\n            <div className=\"col-lg-12\">\n              {!hasFilteredResults && hasResults ? (\n                <Card>\n                  <CardBody>\n                    <h5 className=\"mb-2\">No trips match your filters</h5>\n                    <p className=\"mb-0 text-muted\">Try widening your price/time window or resetting filters.</p>\n                  </CardBody>\n                </Card>\n              ) : null}\n\n              {filteredTrips.map((trip: Trip) => (\n                <Card key={trip.id} className=\"ta-trip-card\">\n                  <CardBody className=\"ta-trip-card__body\">\n                    <div className=\"ta-trip-card__left\">\n                      <div className=\"ta-trip-card__logo\">\n                        {trip.agency_logo ? (\n                          <Image src={trip.agency_logo} alt=\"agency logo\" width={44} height={44} />\n                        ) : (\n                          <Image src={logo} alt=\"logo\" width={44} height={44} />\n                        )}\n                      </div>\n                      <div className=\"ta-trip-card__meta\">\n                        <div className=\"ta-trip-card__top\">\n                          <div className=\"ta-trip-card__agency\">{trip.agency_name}</div>\n                          <span className=\"badge rounded-pill text-bg-light\">\n                            {trip.trip_type || 'Standard'}\n                          </span>\n                        </div>\n                        <div className=\"ta-trip-card__route\">\n                          <strong>{trip.from_location}</strong> <span className=\"text-muted\">→</span>{' '}\n                          <strong>{trip.to_location}</strong>\n                        </div>\n                        <div className=\"ta-trip-card__sub\">\n                          <span>{t('departure')}: {String(trip.departure || '')}</span>\n                          <span className=\"ta-dot\">•</span>\n                          <span>{t('available_seats')}: {availableSeats(trip)}</span>\n                        </div>\n                      </div>\n                    </div>\n\n                    <div className=\"ta-trip-card__right\">\n                      <div className=\"ta-trip-card__price\">\n                        <div className=\"ta-trip-card__price-label\">{t('price')}</div>\n                        <div className=\"ta-trip-card__price-value\">{trip.price} XAF</div>\n                      </div>\n                      {trip.reserved !== trip.seats ? (\n                        <Button\n                          color=\"primary\"\n                          className=\"ta-btn-primary\"\n                          onClick={() => getCurrentTrip(trip)}\n                        >\n                          {t('get_ticket')}\n                        </Button>\n                      ) : (\n                        <Button disabled className=\"ta-btn-primary\">\n                          {t('sold_out') || 'Sold Out'}\n                        </Button>\n                      )}\n                    </div>\n                  </CardBody>\n                </Card>\n              ))}\n            </div>\n          </div>\n\n          <UserBookingModal\n            getModal={setModal}\n            modal={modal}\n            booking={tripRef.current || undefined}\n            buttonText={t(\"buy\")}\n          />\n          {success && (\n            <Modal isOpen={modalSuccess.modal_static} toggle={hideSuccessModal} centered size=\"sm\">\n              <ModalHeader toggle={hideSuccessModal}>{t('Success')}!</ModalHeader>\n              <ModalBody>\n                <Row>\n                  <Col lg={12}>\n                    <p className=\"text-center\">{t('ticket_num')} {ticket}</p>\n                    <p className=\"text-center\">{t('seat')}: {seat}</p>\n                  </Col>\n                </Row>\n              </ModalBody>\n              <ModalFooter>\n                <Button color=\"primary\" onClick={hideSuccessModal}>OK</Button>\n              </ModalFooter>\n            </Modal>\n          )}\n          {isVisible && (\n            <Modal isOpen={modalFailure.modal_static} toggle={hideFailureModal} centered size=\"sm\">\n              <ModalHeader toggle={hideFailureModal}>{t('Failed')}!</ModalHeader>\n              <ModalBody>\n                <Row>\n                  <Col lg={12}>\n                    <p className=\"text-center\">{t('failed_booking')}</p>\n                  </Col>\n                </Row>\n              </ModalBody>\n              <ModalFooter>\n                <Button color=\"primary\" onClick={hideFailureModal}>OK</Button>\n              </ModalFooter>\n            </Modal>\n          )}\n        </div>\n      </section>\n    </>\n  );\n};\n\nexport default TripSearch;\n","import src from \"IMAGE\";\nexport default { src, width: 90, height: 90, blurWidth: 8, blurHeight: 8, blurDataURL: \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAgAAAAICAIAAABLbSncAAAAMElEQVR42qXNuwkAIBRD0bf/WkHywaEUOxEbPe0NpPpFvQZJtkkm2UJbAMzF58dpAJnnmIYPWUN+AAAAAElFTkSuQmCC\"};\n","'use client'\n\nimport React, { useEffect, useMemo, useState } from \"react\";\nimport {\n  Row,\n  Col,\n  Modal,\n  ModalHeader,\n  ModalBody,\n  ModalFooter,\n  Button,\n} from \"reactstrap\";\nimport { toast } from \"react-hot-toast\";\nimport { useTranslation } from \"react-i18next\";\nimport { useStateMachine } from \"little-state-machine\";\nimport {\n  updateBooking,\n  updateAction,\n  updateUser,\n} from \"../../utils/updateActions\";\nimport ShortUniqueId from \"short-unique-id\";\nimport { useForm } from \"react-hook-form\";\nimport axios from \"axios\";\nimport { SpinnerCircular } from 'spinners-react';\nimport type { Trip } from \"../../interfaces/trips.interface\";\nimport { useRouter } from \"next/navigation\";\nimport { CreditCard, Mail, MapPin, Phone, User, X } from \"lucide-react\";\n\ninterface UserBookingModalProps {\n  modal: { modal_static: boolean };\n  getModal: (value: { modal_static: boolean }) => void;\n  booking?: Trip;\n  buttonText?: string;\n}\n\ninterface BookingFormData {\n  name: string;\n  idCardNo: string;\n  phoneNumber: string;\n  payerEmail: string;\n  seat: string;\n}\n\nconst UserBookingModal: React.FC<UserBookingModalProps> = ({\n  modal,\n  getModal,\n  booking,\n  buttonText = \"Pay Now\",\n}) => {\n  const { t } = useTranslation();\n  const router = useRouter();\n  const {\n    register,\n    reset,\n    getValues,\n    setValue,\n    watch,\n    handleSubmit,\n    formState: { errors },\n  } = useForm<BookingFormData>();\n\n  const [loading, setLoading] = useState<boolean>(false);\n  const { state } = useStateMachine({\n    updateBooking,\n    updateAction,\n    updateUser,\n  });\n  const stateAny = state as any;\n  // `updateAction({ trip: tripObj })` stores the Trip directly at `state.trip` (not `state.trip.trip`)\n  const selectedTrip: Trip | undefined = (stateAny?.trip?.trip as Trip | undefined) ?? (stateAny?.trip as Trip | undefined);\n\n  const uid = new ShortUniqueId({ length: 10, dictionary: \"alphanum_upper\" });\n  const transaction_id = uid.rnd();\n\n  useEffect(() => {\n    if (booking) {\n      reset({\n        data: booking,\n      } as any);\n    }\n  }, [booking, reset]);\n\n  const makePaymentOnPayunit = async (): Promise<void> => {\n    setLoading(true);\n    const phone = getValues(\"phoneNumber\");\n    const name = getValues('name');\n    const idCard = getValues('idCardNo');\n    const payerEmail = getValues('payerEmail');\n    const seat = getValues('seat');\n\n    if (!seat) {\n      toast.error(t('seat_required') || 'Please select a seat');\n      setLoading(false);\n      return;\n    }\n\n    if (typeof window !== 'undefined') {\n      localStorage.setItem(\"phone\", phone);\n      localStorage.setItem(\"phoneNumber\", phone);\n      localStorage.setItem(\"name\", name);\n      localStorage.setItem(\"idCard\", idCard);\n      localStorage.setItem(\"email\", payerEmail);\n      localStorage.setItem(\"seat\", seat);\n      localStorage.setItem(\"transactionID\", transaction_id);\n    }\n\n    const tripForPayment = selectedTrip;\n    const booked = {\n      total_amount: tripForPayment?.price || 100,\n      currency: \"XAF\",\n      transaction_id: transaction_id,\n      return_url: `${process.env.NEXT_PUBLIC_APP_URL || 'https://transapp-user.herokuapp.com'}/payunit-return/:transaction_id/:transaction_amount/:transaction_gateway/:transaction_status/:purchaseRef/:currency`,\n    };\n\n    const createBookingFallback = async (): Promise<void> => {\n      if (!tripForPayment?.id) {\n        toast.error('No trip selected');\n        return;\n      }\n\n      const bookingPayload = {\n        phone_number: phone ? Number(phone) : null,\n        number_of_seats: \"1\",\n        ticket_type: \"One-way\",\n        name: name || '',\n        id_card_no: idCard || null,\n        payer_email: payerEmail || null,\n        seat: seat,\n        trip_id: tripForPayment.id,\n        agency_name: tripForPayment.agency_name,\n        journey_date: tripForPayment.journey_date,\n        price: tripForPayment.price,\n        departure_city: tripForPayment.from_location,\n        arrival_city: tripForPayment.to_location,\n        departure_time: tripForPayment.departure,\n      };\n\n      // Logged-in users create a real booking (server validates auth via bearer token / cookies)\n      const { data } = await axios.post<{ error: boolean; message: string; data?: any }>(\n        `api/v1/bookings/create-booking/${tripForPayment.id}`,\n        bookingPayload\n      );\n\n      if ((data as any)?.error) {\n        toast.error((data as any)?.message || 'Booking failed');\n        return;\n      }\n\n      toast.success((data as any)?.message || 'Booking created (dev mode)');\n      getModal({ modal_static: false });\n      const bookingId = (data as any)?.data?.id;\n      if (bookingId) {\n        router.push(`/ticket/${bookingId}`);\n      }\n    };\n\n    try {\n      // IMPORTANT: Call our server-side proxy to avoid browser CORS issues with PayUnit.\n      const { data } = await axios.post(`api/v1/payunit/initialize`, booked);\n      if (data?.error) {\n        toast.error(data.message);\n        setLoading(false);\n      } else {\n        if (data.status === \"SUCCESS\" && typeof window !== 'undefined') {\n          window.location.href = data.data.transaction_url;\n        }\n      }\n    } catch (error: unknown) {\n      if (axios.isAxiosError(error)) {\n        const msg = (error.response?.data as any)?.message || 'Payment initialization failed';\n        // In local dev, PayUnit often fails due to credentials / environment; fall back to booking creation\n        // so you can still test the booking pipeline end-to-end.\n        if (process.env.NODE_ENV !== 'production') {\n          toast.error(msg + ' — creating booking directly (dev fallback).');\n          try {\n            await createBookingFallback();\n          } catch (e: unknown) {\n            toast.error((e as any)?.message || 'Booking fallback failed');\n          } finally {\n            setLoading(false);\n          }\n          return;\n        }\n        toast.error(msg);\n      } else {\n        toast.error('An unexpected error occurred');\n      }\n      setLoading(false);\n    }\n  };\n\n  const tripForDisplay = selectedTrip;\n\n  const [takenSeats, setTakenSeats] = useState<string[]>([]);\n  const [loadingSeats, setLoadingSeats] = useState<boolean>(false);\n  const seatCount = useMemo(() => {\n    const n = Number(tripForDisplay?.seats);\n    return Number.isFinite(n) && n > 0 ? n : 0;\n  }, [tripForDisplay?.seats]);\n\n  useEffect(() => {\n    const load = async (): Promise<void> => {\n      if (!modal.modal_static) return;\n      if (!tripForDisplay?.id) return;\n      setLoadingSeats(true);\n      try {\n        const { data } = await axios.get<{ error: boolean; message: string; data?: { takenSeats: string[] } }>(\n          `api/v1/bookings/trip-seats/${tripForDisplay.id}`\n        );\n        if ((data as any)?.error) {\n          setTakenSeats([]);\n        } else {\n          setTakenSeats((data as any)?.data?.takenSeats || []);\n        }\n      } catch {\n        setTakenSeats([]);\n      } finally {\n        setLoadingSeats(false);\n      }\n    };\n    load();\n  }, [modal.modal_static, tripForDisplay?.id]);\n\n  const pickSeat = (seat: string): void => {\n    setValue('seat', seat, { shouldValidate: true, shouldDirty: true });\n  };\n\n  const selectedSeat = watch('seat');\n  const seatRows = useMemo(() => {\n    if (seatCount <= 0) return [];\n    const seats = Array.from({ length: seatCount }, (_, i) => String(i + 1));\n    const rows: Array<{ left: [string | null, string | null]; right: [string | null, string | null] }> = [];\n    for (let i = 0; i < seats.length; i += 4) {\n      rows.push({\n        left: [seats[i] ?? null, seats[i + 1] ?? null],\n        right: [seats[i + 2] ?? null, seats[i + 3] ?? null],\n      });\n    }\n    return rows;\n  }, [seatCount]);\n\n  const SeatButton = ({ seat }: { seat: string | null }) => {\n    if (!seat) return <div className=\"ta-seat ta-seat--empty\" aria-hidden=\"true\" />;\n    const isTaken = takenSeats.includes(seat);\n    const isSelected = selectedSeat === seat;\n    return (\n      <button\n        key={seat}\n        type=\"button\"\n        className={`ta-seat ${isTaken ? 'is-taken' : 'is-available'} ${isSelected ? 'is-selected' : ''}`}\n        disabled={isTaken}\n        onClick={() => pickSeat(seat)}\n        aria-label={`Seat ${seat}${isTaken ? ' (taken)' : isSelected ? ' (selected)' : ''}`}\n      >\n        {seat}\n      </button>\n    );\n  };\n\n  return (\n    <>\n      <Modal\n        isOpen={modal.modal_static}\n        backdrop=\"static\"\n        centered\n        size=\"lg\"\n        contentClassName=\"ta-modal\"\n      >\n        <ModalHeader className=\"ta-modal__header\">\n          <div className=\"ta-modal__headerInner\">\n            <div>\n              <div className=\"ta-modal__kicker\">{t('booking_details') || 'Booking details'}</div>\n              <div className=\"ta-modal__title\">\n                <MapPin size={18} />\n                <span>{tripForDisplay?.from_location || '-'}</span>\n                <span className=\"ta-modal__arrow\">→</span>\n                <span>{tripForDisplay?.to_location || '-'}</span>\n              </div>\n            </div>\n            <button\n              type=\"button\"\n              className=\"ta-modal__close\"\n              onClick={() => getModal({ modal_static: false })}\n              aria-label={t('close') || 'Close'}\n            >\n              <X size={18} />\n            </button>\n          </div>\n        </ModalHeader>\n        <ModalBody>\n          <form onSubmit={handleSubmit(makePaymentOnPayunit)}>\n            <Row>\n              <Col lg={6}>\n                <div className=\"ta-field\">\n                  <label htmlFor=\"name\" className=\"ta-field__label\">{t(\"name\")}</label>\n                  <div className=\"ta-field__control\">\n                    <span className=\"ta-field__icon\" aria-hidden=\"true\"><User size={16} /></span>\n                    <input\n                      type=\"text\"\n                      id=\"name\"\n                      className=\"form-control ta-input\"\n                      {...register(\"name\", { required: true, minLength: 2 })}\n                    />\n                  </div>\n                </div>\n                {errors.name && (\n                  <p style={{ color: \"red\" }}>{t(\"agency_branch_err\")}</p>\n                )}\n              </Col>\n              <Col lg={6}>\n                <div className=\"ta-field\">\n                  <label htmlFor=\"idCardNo\" className=\"ta-field__label\">{t(\"id_card\")}</label>\n                  <div className=\"ta-field__control\">\n                    <span className=\"ta-field__icon\" aria-hidden=\"true\"><CreditCard size={16} /></span>\n                    <input\n                      type=\"text\"\n                      id=\"idCardNo\"\n                      className=\"form-control ta-input\"\n                      {...register(\"idCardNo\", { required: true })}\n                    />\n                  </div>\n                </div>\n                {errors.idCardNo && (\n                  <p style={{ color: \"red\" }}>{t(\"id_card_err\")}</p>\n                )}\n              </Col>\n\n              <Col lg={6}>\n                <div className=\"ta-field\">\n                  <label htmlFor=\"phoneNumber\" className=\"ta-field__label\">{t(\"phone\")}</label>\n                  <div className=\"ta-field__control\">\n                    <span className=\"ta-field__icon\" aria-hidden=\"true\"><Phone size={16} /></span>\n                    <input\n                      type=\"tel\"\n                      inputMode=\"numeric\"\n                      id=\"phoneNumber\"\n                      placeholder={t('valid_momo_number') || \"Valid money transfer number\"}\n                      className=\"form-control ta-input\"\n                      {...register(\"phoneNumber\", { required: true, minLength: 9, maxLength: 12 })}\n                    />\n                  </div>\n                </div>\n                {errors.phoneNumber && (\n                  <p style={{ color: \"red\" }}>{t(\"phone_err\")}</p>\n                )}\n              </Col>\n\n              <Col lg={6}>\n                <div className=\"ta-field\">\n                  <label htmlFor=\"payerEmail\" className=\"ta-field__label\">{t(\"email_address\")}</label>\n                  <div className=\"ta-field__control\">\n                    <span className=\"ta-field__icon\" aria-hidden=\"true\"><Mail size={16} /></span>\n                    <input\n                      type=\"email\"\n                      id=\"payerEmail\"\n                      className=\"form-control ta-input\"\n                      {...register(\"payerEmail\", { required: true })}\n                    />\n                  </div>\n                </div>\n                {errors.payerEmail && (\n                  <p style={{ color: \"red\" }}>{t(\"phone_err\")}</p>\n                )}\n              </Col>\n            </Row>\n\n            <div className=\"ta-seatmap mt-3\">\n              <div className=\"ta-seatmap__header\">\n                <div>\n                  <div className=\"ta-seatmap__title\">{t('seat') || 'Seat'}</div>\n                  <div className=\"ta-seatmap__subtitle\">\n                    {loadingSeats ? (t('loading') || 'Loading...') : (t('select_seat') || 'Select your seat')}\n                  </div>\n                </div>\n                <div className=\"ta-seatmap__legend\">\n                  <span className=\"ta-legend is-available\">{t('available') || 'Available'}</span>\n                  <span className=\"ta-legend is-selected\">{t('selected') || 'Selected'}</span>\n                  <span className=\"ta-legend is-taken\">{t('taken') || 'Taken'}</span>\n                </div>\n              </div>\n\n              <input type=\"hidden\" {...register(\"seat\", { required: true })} />\n              {errors.seat ? (\n                <div className=\"text-danger mt-1\">{t('seat_required') || 'Please select a seat'}</div>\n              ) : null}\n\n              {seatCount > 0 ? (\n                <div className=\"ta-seatmap__bus\" role=\"group\" aria-label={t('seat_map') || 'Seat map'}>\n                  <div className=\"ta-seatmap__driver\" aria-hidden=\"true\">{t('driver') || 'Driver'}</div>\n                  <div className=\"ta-seatmap__rows\">\n                    {seatRows.map((row, idx) => (\n                      <div key={idx} className=\"ta-seatmap__row\">\n                        <div className=\"ta-seatmap__side\">\n                          <SeatButton seat={row.left[0]} />\n                          <SeatButton seat={row.left[1]} />\n                        </div>\n                        <div className=\"ta-seatmap__aisle\" aria-hidden=\"true\" />\n                        <div className=\"ta-seatmap__side\">\n                          <SeatButton seat={row.right[0]} />\n                          <SeatButton seat={row.right[1]} />\n                        </div>\n                      </div>\n                    ))}\n                  </div>\n                </div>\n              ) : (\n                <div className=\"text-muted\">{t('no_seat_map') || 'Seat map not available for this trip'}</div>\n              )}\n            </div>\n\n            <ModalFooter>\n              {loading ? (\n                <div style={{ display: 'flex', justifyContent: 'center', alignItems: 'center', padding: '20px' }}>\n                  <SpinnerCircular\n                    color=\"#bcc015\"\n                    size={50}\n                    aria-label=\"Loading Spinner\"\n                    data-testid=\"loader\"\n                  />\n                </div>\n              ) : (\n                <>\n                  <Button\n                    color=\"light\"\n                    onClick={() => getModal({ modal_static: false })}\n                  >\n                    {t(\"cancel\")}\n                  </Button>\n                  <Button type=\"submit\" color=\"primary\">\n                    {buttonText}\n                  </Button>\n                </>\n              )}\n            </ModalFooter>\n          </form>\n        </ModalBody>\n      </Modal>\n    </>\n  );\n};\n\nexport default UserBookingModal;\n"],"names":[],"mappings":"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"}