module.exports=[720908,(a,b,c)=>{"use strict";c.__esModule=!0,c.default=void 0,c.isTrivialHref=h,c.useButtonProps=i;var d=function(a,b){if(a&&a.__esModule)return a;if(null===a||"object"!=typeof a&&"function"!=typeof a)return{default:a};var c=g(void 0);if(c&&c.has(a))return c.get(a);var d={__proto__:null},e=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var f in a)if("default"!==f&&({}).hasOwnProperty.call(a,f)){var h=e?Object.getOwnPropertyDescriptor(a,f):null;h&&(h.get||h.set)?Object.defineProperty(d,f,h):d[f]=a[f]}return d.default=a,c&&c.set(a,d),d}(a.r(572131)),e=a.r(187924);let f=["as","disabled"];function g(a){if("function"!=typeof WeakMap)return null;var b=new WeakMap,c=new WeakMap;return(g=function(a){return a?c:b})(a)}function h(a){return!a||"#"===a.trim()}function i({tagName:a,disabled:b,href:c,target:d,rel:e,role:f,onClick:g,tabIndex:i=0,type:j}){a||(a=null!=c||null!=d||null!=e?"a":"button");let k={tagName:a};if("button"===a)return[{type:j||"button",disabled:b},k];let l=d=>{((b||"a"===a&&h(c))&&d.preventDefault(),b)?d.stopPropagation():null==g||g(d)};return"a"===a&&(c||(c="#"),b&&(c=void 0)),[{role:null!=f?f:"button",disabled:void 0,tabIndex:b?void 0:i,href:c,target:"a"===a?d:void 0,"aria-disabled":b||void 0,rel:"a"===a?e:void 0,onClick:l,onKeyDown:a=>{" "===a.key&&(a.preventDefault(),l(a))}},k]}let j=d.forwardRef((a,b)=>{let{as:c,disabled:d}=a,g=function(a,b){if(null==a)return{};var c={};for(var d in a)if(({}).hasOwnProperty.call(a,d)){if(b.indexOf(d)>=0)continue;c[d]=a[d]}return c}(a,f),[h,{tagName:j}]=i(Object.assign({tagName:c,disabled:d},g));return(0,e.jsx)(j,Object.assign({},g,h,{ref:b}))});j.displayName="Button",c.default=j},237102,a=>{"use strict";var b=a.i(187924),c=a.i(572131),d=a.i(105579),e=a.i(828525);let f=c.createContext({prefixes:{},breakpoints:["xxl","xl","lg","md","sm","xs"],minBreakpoint:"xs"}),{Consumer:g,Provider:h}=f;function i(a,b){let{prefixes:d}=(0,c.useContext)(f);return a||d[b]||b}function j(){let{breakpoints:a}=(0,c.useContext)(f);return a}function k(){let{minBreakpoint:a}=(0,c.useContext)(f);return a}let l=c.forwardRef(({bsPrefix:a,className:c,as:d="div",...f},g)=>{let h=i(a,"row"),l=j(),m=k(),n=`${h}-cols`,o=[];return l.forEach(a=>{let b,c=f[a];delete f[a],null!=c&&"object"==typeof c?{cols:b}=c:b=c;let d=a!==m?`-${a}`:"";null!=b&&o.push(`${n}${d}-${b}`)}),(0,b.jsx)(d,{ref:g,...f,className:(0,e.default)(c,h,...o)})});l.displayName="Row";let m=c.forwardRef((a,c)=>{let[{className:d,...f},{as:g="div",bsPrefix:h,spans:l}]=function({as:a,bsPrefix:b,className:c,...d}){b=i(b,"col");let f=j(),g=k(),h=[],l=[];return f.forEach(a=>{let c,e,f,i=d[a];delete d[a],"object"==typeof i&&null!=i?{span:c,offset:e,order:f}=i:c=i;let j=a!==g?`-${a}`:"";c&&h.push(!0===c?`${b}${j}`:`${b}${j}-${c}`),null!=f&&l.push(`order${j}-${f}`),null!=e&&l.push(`offset${j}-${e}`)}),[{...d,className:(0,e.default)(c,...h,...l)},{as:a,bsPrefix:b,spans:h}]}(a);return(0,b.jsx)(g,{...f,ref:c,className:(0,e.default)(d,!l.length&&h)})});m.displayName="Col";let n=c.forwardRef(({className:a,bsPrefix:c,as:d="div",...f},g)=>(c=i(c,"card-body"),(0,b.jsx)(d,{ref:g,className:(0,e.default)(a,c),...f})));n.displayName="CardBody";let o=c.forwardRef(({className:a,bsPrefix:c,as:d="div",...f},g)=>(c=i(c,"card-footer"),(0,b.jsx)(d,{ref:g,className:(0,e.default)(a,c),...f})));o.displayName="CardFooter";let p=c.createContext(null);p.displayName="CardHeaderContext";let q=c.forwardRef(({bsPrefix:a,className:d,as:f="div",...g},h)=>{let j=i(a,"card-header"),k=(0,c.useMemo)(()=>({cardHeaderBsPrefix:j}),[j]);return(0,b.jsx)(p.Provider,{value:k,children:(0,b.jsx)(f,{ref:h,...g,className:(0,e.default)(d,j)})})});q.displayName="CardHeader";let r=c.forwardRef(({bsPrefix:a,className:c,variant:d,as:f="img",...g},h)=>{let j=i(a,"card-img");return(0,b.jsx)(f,{ref:h,className:(0,e.default)(d?`${j}-${d}`:j,c),...g})});r.displayName="CardImg";let s=c.forwardRef(({className:a,bsPrefix:c,as:d="div",...f},g)=>(c=i(c,"card-img-overlay"),(0,b.jsx)(d,{ref:g,className:(0,e.default)(a,c),...f})));s.displayName="CardImgOverlay";let t=c.forwardRef(({className:a,bsPrefix:c,as:d="a",...f},g)=>(c=i(c,"card-link"),(0,b.jsx)(d,{ref:g,className:(0,e.default)(a,c),...f})));t.displayName="CardLink";let u=a=>c.forwardRef((c,d)=>(0,b.jsx)("div",{...c,ref:d,className:(0,e.default)(c.className,a)})),v=u("h6"),w=c.forwardRef(({className:a,bsPrefix:c,as:d=v,...f},g)=>(c=i(c,"card-subtitle"),(0,b.jsx)(d,{ref:g,className:(0,e.default)(a,c),...f})));w.displayName="CardSubtitle";let x=c.forwardRef(({className:a,bsPrefix:c,as:d="p",...f},g)=>(c=i(c,"card-text"),(0,b.jsx)(d,{ref:g,className:(0,e.default)(a,c),...f})));x.displayName="CardText";let y=u("h5"),z=c.forwardRef(({className:a,bsPrefix:c,as:d=y,...f},g)=>(c=i(c,"card-title"),(0,b.jsx)(d,{ref:g,className:(0,e.default)(a,c),...f})));z.displayName="CardTitle";let A=c.forwardRef(({bsPrefix:a,className:c,bg:d,text:f,border:g,body:h=!1,children:j,as:k="div",...l},m)=>{let o=i(a,"card");return(0,b.jsx)(k,{ref:m,...l,className:(0,e.default)(c,o,d&&`bg-${d}`,f&&`text-${f}`,g&&`border-${g}`),children:h?(0,b.jsx)(n,{children:j}):j})});A.displayName="Card";let B=Object.assign(A,{Img:r,Title:z,Subtitle:w,Body:n,Link:t,Text:x,Header:q,Footer:o,ImgOverlay:s});var C=a.i(720908);let D=c.forwardRef(({as:a,bsPrefix:c,variant:d="primary",size:f,active:g=!1,disabled:h=!1,className:j,...k},l)=>{let m=i(c,"btn"),[n,{tagName:o}]=(0,C.useButtonProps)({tagName:a,disabled:h,...k});return(0,b.jsx)(o,{...n,...k,ref:l,disabled:h,className:(0,e.default)(j,m,g&&"active",d&&`${m}-${d}`,f&&`${m}-${f}`,k.href&&h&&"disabled")})});D.displayName="Button";var E=a.i(50944),F=a.i(406704),G=a.i(418213);a.i(802407);var H=a.i(778134),I=a.i(554928),J=a.i(352477),K=a.i(192676),L=a.i(83490);a.s(["default",0,()=>{let{t:a}=(0,H.useTranslation)(),e=(0,E.useRouter)(),[f,g]=(0,c.useState)(!1),[h,i]=(0,c.useState)({name:"",idCardNo:null,payerName:"",phoneNumber:null,payerEmail:"",numberOfSeats:1,ticketType:"One-way",seat:""}),{name:j,idCardNo:k,payerName:n,phoneNumber:o,payerEmail:p,numberOfSeats:q,ticketType:r,seat:s}=h;(0,c.useEffect)(()=>{"undefined"!=typeof document&&document.body.setAttribute("style","background: #f8f8f8!important;")},[]);let t=a=>b=>{i({...h,[a]:b.target.value})},{actions:u,state:v}=(0,I.useStateMachine)({updateBooking:J.updateBooking,updateAction:J.updateAction,updateUser:J.updateUser}),w=async a=>{a.preventDefault(),g(!0);let b=v?.trip?.trip;if(!b){F.toast.error("No trip selected"),g(!1);return}try{if(v?.user?.data?.data?.email){let{data:a}=await L.default.post(`api/v1/bookings/create-booking/${b.id}`,h);a?.error?F.toast.error(a.message):(u.updateBooking({booking:a.data}),x(),F.toast.success(a.message),g(!1))}else{let{data:a}=await L.default.post(`api/v1/bookings/anon-booking/${b.id}`,h);if(a?.error)F.toast.error(a.message);else{u.updateBooking({booking:a.data});let b=a?.data?.id;e.push(b?`/ticket/${b}`:"/ticket-summary"),F.toast.success(a.message),g(!1)}}}catch(a){L.default.isAxiosError(a)?F.toast.error(a.response?.data?.message||"Failed to create booking"):F.toast.error("An unexpected error occurred"),g(!1)}},x=async()=>{let a=new K.default({length:7,dictionary:"alphanum_upper"}),b={"Content-Type":"application/json",Authorization:"Basic 4d70631d-397c-4efd-929a-87fcd3a9d1622a8f415d-d9d2-4834-a573-b12c1375b94c","x-api-key":process.env.NEXT_PUBLIC_PAYUNIT_API_KEY||"sand_wjYGZXPZoSYMsV8p8jvlXjMCnK1bnW",mode:"test"},c=v?.trip?.trip,d={total_amount:c?.price||100,currency:"XAF",transaction_id:a.rnd(),return_url:"http://localhost:3000/api/v1/bookings/payunit-return"};try{let{data:a}=await L.default.post("https://app.payunit.net/api/gateway/initialize",d,{headers:b});a?.error?F.toast.error(a.message):e.push("/ticket-summary")}catch(a){L.default.isAxiosError(a)?F.toast.error(a.response?.data?.message||"Payment initialization failed"):F.toast.error("An unexpected error occurred")}},y=v?.trip?.trip;return(0,b.jsx)("div",{className:"container ticket-form",children:(0,b.jsxs)(l,{children:[(0,b.jsx)(m,{lg:6,children:(0,b.jsxs)("form",{children:[(0,b.jsx)(B,{children:(0,b.jsxs)(B.Body,{children:[(0,b.jsx)("h6",{children:"Enter Passenger Details"}),(0,b.jsxs)(l,{children:[(0,b.jsx)(m,{lg:6,children:(0,b.jsxs)("div",{className:"form-group",children:[(0,b.jsx)("label",{htmlFor:"name",children:a("name")}),(0,b.jsx)("input",{type:"text",name:"name",id:"name",required:!0,className:"form-control",onChange:t("name"),value:j})]})}),(0,b.jsx)(m,{lg:6,children:(0,b.jsxs)("div",{className:"form-group",children:[(0,b.jsx)("label",{htmlFor:"idCardNo",children:a("id_card")}),(0,b.jsx)("input",{type:"text",name:"idCardNo",id:"idCardNo",required:!0,className:"form-control",onChange:t("idCardNo"),value:k||""})]})})]})]})}),(0,b.jsx)(B,{children:(0,b.jsxs)(B.Body,{children:[(0,b.jsx)("h6",{children:a("seat")||"Seat"}),(0,b.jsxs)("div",{className:"form-group",children:[(0,b.jsx)("label",{htmlFor:"seat",children:a("seat")||"Seat"}),(0,b.jsxs)("select",{id:"seat",name:"seat",required:!0,className:"form-control",value:s,onChange:t("seat"),children:[(0,b.jsx)("option",{value:"",children:a("select")||"Select"}),Array.from({length:Number(y?.seats||0)},(a,b)=>String(b+1)).map(a=>(0,b.jsx)("option",{value:a,children:a},a))]})]})]})}),(0,b.jsx)(B,{children:(0,b.jsxs)(B.Body,{children:[(0,b.jsx)("h6",{children:"Details of Person Paying"}),(0,b.jsxs)(l,{children:[(0,b.jsx)(m,{lg:6,children:(0,b.jsxs)("div",{className:"form-group",children:[(0,b.jsx)("label",{htmlFor:"payerName",children:a("name")}),(0,b.jsx)("input",{type:"text",name:"payerName",id:"payerName",required:!0,className:"form-control",onChange:t("payerName"),value:n})]})}),(0,b.jsx)(m,{lg:6,children:(0,b.jsxs)("div",{className:"form-group",children:[(0,b.jsx)("label",{htmlFor:"payerEmail",children:a("email_address")}),(0,b.jsx)("input",{type:"email",name:"payerEmail",id:"payerEmail",required:!0,className:"form-control",onChange:t("payerEmail"),value:p})]})}),(0,b.jsx)(m,{lg:6,children:(0,b.jsxs)("div",{className:"form-group",children:[(0,b.jsx)("label",{htmlFor:"phoneNumber",children:a("phone")}),(0,b.jsx)("input",{type:"number",name:"phoneNumber",id:"phoneNumber",required:!0,className:"form-control",onChange:t("phoneNumber"),value:o||""})]})})]})]})}),(0,b.jsx)(B,{children:(0,b.jsxs)(B.Body,{children:[(0,b.jsx)("small",{children:"You will be redirected to related website to do this transaction"}),(0,b.jsx)(l,{className:"mt-5",children:(0,b.jsx)(m,{lg:12,children:f?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(d.SpinnerCircular,{})," ",(0,b.jsx)("p",{children:"Just a moment please buddy..."})]}):(0,b.jsx)(D,{className:"w-100",variant:"success",onClick:w,children:"MAKE PAYMENT NOW"})})})]})})]})}),(0,b.jsx)(m,{lg:6,className:"mt-3",children:y&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("h6",{children:"Onward Trip Details"}),(0,b.jsx)("small",{children:y.agency_name||y.agencyName})]}),(0,b.jsx)(l,{children:(0,b.jsx)(m,{lg:6,children:(0,b.jsxs)(l,{children:[(0,b.jsx)(m,{children:(0,b.jsx)("small",{children:y.from_location||y.from})}),(0,b.jsx)(m,{children:(0,b.jsx)("span",{children:" To "})}),(0,b.jsx)(m,{children:(0,b.jsx)("small",{children:y.to_location||y.to})})]})})}),(0,b.jsxs)(l,{children:[(0,b.jsx)(m,{children:(0,b.jsx)("small",{children:y.journey_date||y.journeyDate})}),(0,b.jsx)(m,{children:(0,b.jsx)("small",{children:y.departure||y.departure_time})}),(0,b.jsx)(m,{children:(0,b.jsx)("small",{children:y.arrival?(0,G.default)(y.arrival).format("LT"):""})})]}),(0,b.jsx)("hr",{className:"mt-4"}),(0,b.jsx)(l,{children:(0,b.jsx)(m,{children:(0,b.jsx)("h6",{children:"Passenger Details"})})}),(0,b.jsxs)(l,{children:[(0,b.jsxs)(m,{children:[(0,b.jsx)("div",{children:(0,b.jsx)("small",{children:"Name"})}),(0,b.jsx)("div",{children:(0,b.jsx)("small",{children:j})})]}),(0,b.jsxs)(m,{children:[(0,b.jsx)("div",{children:(0,b.jsx)("small",{children:"ID Card"})}),(0,b.jsx)("div",{children:(0,b.jsx)("small",{children:k})})]}),(0,b.jsxs)(m,{children:[(0,b.jsx)("div",{children:(0,b.jsx)("small",{children:"Number Of Seats"})}),(0,b.jsx)("div",{children:(0,b.jsx)("small",{children:q})})]}),(0,b.jsxs)(m,{children:[(0,b.jsx)("div",{children:(0,b.jsx)("small",{children:"Type"})}),(0,b.jsx)("div",{children:(0,b.jsx)("small",{children:r})})]})]})]})})]})})}],237102)}];

//# sourceMappingURL=_119cd5c3._.js.map